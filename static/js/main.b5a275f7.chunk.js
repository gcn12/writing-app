(this.webpackJsonpwriting_app_cra=this.webpackJsonpwriting_app_cra||[]).push([[0],{135:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var c,a,r,o,i,s,l,d=n(42),u=n(12),h=n(1),p=n.n(h),b=n(33),j=n.n(b),f=(n(135),n(8)),O=n(4),x=n(29),m=x.a.initializeApp({apiKey:"AIzaSyDZovNB2YZLGb8SVd3tGQd44MdFQyLhgTI",authDomain:"writing-136ac.firebaseapp.com",databaseURL:"https://writing-136ac.firebaseio.com",projectId:"writing-136ac",storageBucket:"writing-136ac.appspot.com"}),g=m.firestore(),v=n(2),y=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{}),Object(v.jsx)("input",{}),Object(v.jsx)("button",{onClick:function(){x.a.auth().createUserWithEmailAndPassword("hel2lo@gai1l.com","hello123").then((function(e){var t=e.user;console.log(t),g.collection("users").doc(t.uid).set({userID:t.uid})})).catch((function(e){console.log("error signing up",e)}))},children:"Signup"})]})},D=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{}),Object(v.jsx)("input",{}),Object(v.jsx)("button",{onClick:function(){x.a.auth().signInWithEmailAndPassword("hel2lo@gai1l.com","hello123").then((function(e){console.log("signed in")})).catch((function(e){console.log(e)}))},children:"Signup"})]})},w=n(6),I=n(7),M=n(21),T=n(13),S=n(112),C=function(e,t,n){var c=Date.now(),a=g.collection("users").doc(e);console.log(t),void 0!==t&&a.collection("files-folders").doc(t).update({lastModified:c}).then((function(){console.log("updated")})).catch((function(e){console.log(e)})),n&&a.collection("files-folders").doc(n).update({lastModified:c}).then((function(){console.log("updated")})).catch((function(e){console.log(e),console.log(2)}))},k=n(28),z=(n(44),"CURRENT_PROJECT_ID"),E="USER_DATA",L="PROJECT_FILES",N="CURRENT_FILE_ID",A="OUTLINE_DATA",P="OUTLINE_ITEMS_DISPLAY",R="OUTLINE_ITEMS_FOR_UPDATE",F="NOTES_DATA",U="DASHBOARD_CURRENT_SECTION",B="ROOT_DOCS",_="LAYER_ONE_DOCS",V="LAYER_TWO_DOCS",Z="LAYER_THREE_DOCS",G="CURRENT_LAYER",H="COLOR_THEMES";function X(e){return function(t){t({type:H,payload:e})}}function W(e){return function(t){t({type:G,payload:e})}}function J(e){return function(t){t({type:Z,payload:e})}}function K(e){return function(t){t({type:V,payload:e})}}function Q(e){return function(t){t({type:_,payload:e})}}function Y(e){return function(t){t({type:B,payload:e})}}function q(e){return function(t){t({type:R,payload:e})}}function $(e){return function(t){t({type:P,payload:e})}}var ee,te,ne,ce,ae,re,oe,ie,se,le,de,ue,he,pe,be,je,fe,Oe,xe,me,ge,ve,ye,De,we,Ie,Me,Te,Se,Ce,ke,ze,Ee=Object(u.b)((function(e){return{userData:e.app.userData,breadcrumbs:e.dashboard.breadcrumbs,currentLayer:e.app.currentLayer,rootDocs:e.app.rootDocs,layerOneDocs:e.app.layerOneDocs,layerTwoDocs:e.app.layerTwoDocs,layerThreeDocs:e.app.layerThreeDocs}}))((function(e){var t=Object(h.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],r=function(){return 1===e.breadcrumbs.length?e.userData.userID:e.breadcrumbs[e.breadcrumbs.length-1].docID},o=function(){var t=r(),n=Date.now(),a={name:c,parentID:String(t),type:"folder",docID:String(n),lastModified:n};i(String(n),a,e.setIsCreateProjectModal)},i=function(t,n,c){g.collection("users").doc(e.userData.userID).collection("files-folders").doc(t).set(Object(f.a)({},n)).then((function(){console.log("new file preview created"),p(n),c&&c(!1)}))},s=function(t,n,c){g.collection("users").doc(e.userData.userID).collection("files").doc(t).set(Object(f.a)({},n)).then((function(){console.log("new file created"),l(c,t),e.setIsCreateProjectModal(!1),e.projectSelectedData.docID&&C(e.userData.userID,String(e.projectSelectedData.docID))}))},l=function(e,t){var n="/writing-app/edit/".concat(e,"/").concat(t);window.open(n,"_blank")||(document.location=n)},d=function(e){var t=r();u(t,e)},u=function e(t,n){var a=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,c=0;c<12;c++)e+=t.charAt(Math.floor(Math.random()*n));return e}();g.collection("docID").where("docID","==",a).get().then((function(r){r.empty?(function(e,t,n){var a=Date.now(),r={name:c,type:n,parentID:String(e),docID:String(t),dateCreated:a,lastModified:a};i(t,r),"outline"===n&&(r.data=[]),"notes"!==n&&"screenplay"!==n||(r.text=""),r.lastModified;var o=Object(S.a)(r,["lastModified"]);s(t,o,n)}(t,a,n),function(e){g.collection("docID").add({docID:e}).catch((function(e){return console.log(e)}))}(a)):e()}))},p=function(t){0===e.currentLayer&&e.dispatch(Y([t].concat(Object(T.a)(e.rootDocs)))),1===e.currentLayer&&e.dispatch(Q([t].concat(Object(T.a)(e.layerOneDocs)))),2===e.currentLayer&&e.dispatch(K([t].concat(Object(T.a)(e.layerTwoDocs)))),3===e.currentLayer&&e.dispatch(J([t].concat(Object(T.a)(e.layerThreeDocs))))};return Object(v.jsxs)(Ue,{"aria-label":"create document",isOpen:e.isCreateProjectModal,onDismiss:function(){return e.setIsCreateProjectModal(!1)},children:[Object(v.jsxs)(Le,{children:[Object(v.jsxs)("h1",{children:["Create new ",e.createType]}),Object(v.jsx)(Ne,{label:"close rename dialog",onClick:function(){return e.setIsCreateProjectModal(!1)},children:Object(v.jsx)(Ae,{alt:"delete",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMiAxMS4yOTNsMTAuMjkzLTEwLjI5My43MDcuNzA3LTEwLjI5MyAxMC4yOTMgMTAuMjkzIDEwLjI5My0uNzA3LjcwNy0xMC4yOTMtMTAuMjkzLTEwLjI5MyAxMC4yOTMtLjcwNy0uNzA3IDEwLjI5My0xMC4yOTMtMTAuMjkzLTEwLjI5My43MDctLjcwNyAxMC4yOTMgMTAuMjkzeiIvPjwvc3ZnPg=="})})]}),Object(v.jsx)(Fe,{autoComplete:"off",onChange:function(e){return a(e.target.value)}}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Re,{onClick:function(){return e.setIsCreateProjectModal(!1)},children:"Cancel"}),Object(v.jsx)(Pe,{onClick:function(){return"folder"===e.createType&&e.currentLayer<3?o():"folder"!==e.createType?d(e.createType):void 0},children:"Create project"})]})]})})),Le=I.b.div(c||(c=Object(w.a)(["\n    display: flex;\n    justify-content: space-between;\n"]))),Ne=I.b.button(a||(a=Object(w.a)(["\n    align-self: flex-end;\n"]))),Ae=I.b.img(r||(r=Object(w.a)([" \n    width: 18px;\n    height: 18px;\n"]))),Pe=I.b.button(o||(o=Object(w.a)(["\n    background-color: hsl(0, 0%, 20%);\n    height: 40px;\n    width: 130px;\n    border: none;\n    color: white;\n"]))),Re=I.b.button(i||(i=Object(w.a)(["\n    background-color: transparent;\n    height: 40px;\n    width: 90px;\n    border: none;\n    margin-right: 10px;\n"]))),Fe=I.b.input(s||(s=Object(w.a)(["\n    width: 200px;\n    height: 40px;\n    font-size: 1.25rem;\n"]))),Ue=Object(I.b)(k.a)(l||(l=Object(w.a)(["\n    background-color: white;\n    height: 300px;\n    width: 50vw;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    border-radius: 15px;\n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n    align-items: center;\n    justify-content: space-evenly;\n"]))),Be=function(e){return Object(v.jsx)(_e,{fill:e.fill,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.children})},_e=I.b.svg(ee||(ee=Object(w.a)(["\n    fill: var(--primary-text);\n"]))),Ve=n(48),Ze=function(e){return Object(v.jsxs)(He,{onSelect:function(){return e.openModal(e.docType)},children:[Object(v.jsx)(Ge,{children:Object(v.jsx)(Be,{children:e.children})}),Object(v.jsx)(Xe,{children:e.docType})]})},Ge=I.b.div(te||(te=Object(w.a)(["\n    transform: scale(.8);\n    margin-right: 5px;\n"]))),He=Object(I.b)(Ve.c)(ne||(ne=Object(w.a)(["\n    font-size: 1rem;\n    display: flex;\n    align-items: center;\n"]))),Xe=I.b.p(ce||(ce=Object(w.a)(["\n    text-transform: capitalize;\n"]))),We=(n(140),function(e){return Object(v.jsxs)(Je,{children:["folder"===e.docType&&Object(v.jsx)(Ke,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M6.083 4c1.38 1.612 2.578 3 4.917 3h11v13h-20v-16h4.083zm.917-2h-7v20h24v-17h-13c-1.629 0-2.305-1.058-4-3z"})})}),"screenplay"===e.docType&&Object(v.jsx)(Ke,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M21.155 8.64c-.909 1.519-2.327 3.067-4.097 3.004-.413.706-.852 1.677-1.339 2.803l-1.312.553c.936-2.343 2.231-4.961 3.698-6.994-.67.529-1.746 1.637-2.662 2.783-1.098-1.828-.3-3.691.973-5.179.021.641.359 1.196.601 1.475-.087-.53-.114-1.489.195-2.351.718-.732 1.364-1.271 2.113-1.76-.083.478.08 1.026.262 1.361.024-.49.224-1.43.521-1.84.924-.727 2.332-1.373 3.892-1.495-.081.973-.436 2.575-1.024 3.604-.515.404-1.221.68-1.791.833.493.089 1.031.077 1.494-.001-.269.743-.552 1.428-.998 2.276-.679.468-1.578.732-2.203.825.46.187 1.272.245 1.677.103zm-13.841 3.805l.645.781 4.773-2.791-.668-.768-4.75 2.778zm6.96-.238l-.668-.767-4.805 2.808.645.781 4.828-2.822zm4.679.007c-.421.203-.851.341-1.286.398-.12.231-.246.494-.377.773l.298.342c.623.692.459 1.704-.376 2.239-.773.497-5.341 3.376-6.386 4.035-.074-.721-.358-1.391-.826-1.948-.469-.557-6.115-7.376-7.523-9.178-.469-.6-.575-1.245-.295-1.816.268-.549.842-.918 1.43-.918.919 0 1.408.655 1.549 1.215.16.641-.035 1.231-.623 1.685l1.329 1.624 7.796-4.446c1.422-1.051 1.822-2.991.93-4.513-.618-1.053-1.759-1.706-2.978-1.706-1.188 0-.793-.016-9.565 4.475-1.234.591-2.05 1.787-2.05 3.202 0 .87.308 1.756.889 2.487 1.427 1.794 7.561 9.185 7.616 9.257.371.493.427 1.119.15 1.673-.277.555-.812.886-1.429.886-.919 0-1.408-.655-1.549-1.216-.156-.629.012-1.208.604-1.654l-1.277-1.545c-.822.665-1.277 1.496-1.377 2.442-.232 2.205 1.525 3.993 3.613 3.993.596 0 1.311-.177 1.841-.51l9.427-5.946c.957-.664 1.492-1.781 1.492-2.897 0-.745-.24-1.454-.688-2.003l-.359-.43zm-7.933-10.062c.188-.087.398-.134.609-.134.532 0 .997.281 1.243.752.312.596.226 1.469-.548 1.912l-5.097 2.888c-.051-1.089-.579-2.081-1.455-2.732l5.248-2.686zm2.097 13.383l.361-.905.249-.609-3.449 2.017.645.781 2.194-1.284z"})})}),"notes"===e.docType&&Object(v.jsx)(Ke,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M4 22v-20h16v11.543c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362zm18-7.614v-14.386h-20v24h10.189c3.163 0 9.811-7.223 9.811-9.614zm-5-1.386h-10v-1h10v1zm0-4h-10v1h10v-1zm0-3h-10v1h10v-1z"})})}),"outline"===e.docType&&Object(v.jsx)(Ke,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M4 4v20h20v-20h-20zm18 18h-16v-13h16v13zm-3-3h-10v-1h10v1zm0-3h-10v-1h10v1zm0-3h-10v-1h10v1zm2-11h-19v19h-2v-21h21v2z"})})}),e.docName]})}),Je=I.b.div(ae||(ae=Object(w.a)(["\n    display: flex;\n    align-items: center;\n"]))),Ke=I.b.div(re||(re=Object(w.a)(["\n    margin-right: 10px;\n"]))),Qe=function(e){return Object(v.jsxs)($e,{onClick:function(t){return e.openModal(t)},label:e.labelName,children:[Object(v.jsx)(Ye,{children:e.title}),Object(v.jsx)(et,{children:Object(v.jsx)(Be,{children:e.children})}),Object(v.jsx)(qe,{})]})},Ye=I.b.div(oe||(oe=Object(w.a)(["\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n    background-color: hsl(0, 0%, 10%);\n    height: 30px;\n    min-width: 50px;\n    position: absolute;\n    z-index: 10;\n    top: 160%;\n    left: 50%;\n    transform: translate(-50%, -50%); \n    border-radius: 5px;\n    color: white;\n    vertical-align: middle;\n    padding: 5px 10px;\n"]))),qe=I.b.div(ie||(ie=Object(w.a)(["\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n    background-color: var(--sidebar);\n    height: 35px;\n    width: 35px;\n    position: relative;\n    border-radius: 50%;\n    &:hover{\n        opacity: 1;\n    }\n    &:focus{\n        opacity: 1;\n    }\n"]))),$e=I.b.button(se||(se=Object(w.a)(["\n    position: relative;\n    margin-right: 10px;\n    &:hover{\n        "," {\n            opacity: 1;\n        }\n        "," {\n            opacity: 1;\n        }\n    }\n    &:focus{\n        "," {\n            opacity: 1;\n        }\n        "," {\n            opacity: 1;\n        }\n    }\n"])),qe,Ye,qe,Ye),et=I.b.div(le||(le=Object(w.a)([" \n    /* width: 18px;\n    height: 18px; */\n    z-index: 100;\n    top: 50%;\n    left: 50%;\n    position: absolute;\n    transform: translate(-50%, -50%) scale(.7);\n"]))),tt=n(117),nt=n.n(tt),ct=function(e){var t;return Object(v.jsx)(rt,{role:"row",children:null===(t=e.folderMap[e.currentLayer])||void 0===t?void 0:t.map((function(t,n){return Object(v.jsxs)(ot,{id:"projects-table-row",tabIndex:"0",onKeyDown:function(n){return e.buttonPress(n.code,t.type,t.docID,t.name)},role:"button",onFocus:function(){return e.selectProject(t,n)},onClick:function(){return e.selectItem(t.type,t.docID,t.name)},children:[Object(v.jsx)(it,{role:"cell",children:Object(v.jsx)(We,{docType:t.type,docName:t.name})}),Object(v.jsx)(it,{role:"cell",children:t.type}),Object(v.jsx)(it,{role:"cell",children:nt()(t.lastModified).format("ll")}),Object(v.jsx)(it,{role:"cell",children:Object(v.jsxs)(at,{children:[Object(v.jsx)(Qe,{title:"Rename",openModal:e.showRenameProject,labelName:"rename file",children:Object(v.jsx)("path",{d:"M18.363 8.464l1.433 1.431-12.67 12.669-7.125 1.436 1.439-7.127 12.665-12.668 1.431 1.431-12.255 12.224-.726 3.584 3.584-.723 12.224-12.257zm-.056-8.464l-2.815 2.817 5.691 5.692 2.817-2.821-5.693-5.688zm-12.318 18.718l11.313-11.316-.705-.707-11.313 11.314.705.709z"})}),Object(v.jsx)(Qe,{title:"Delete",openModal:e.showDeleteProject,labelName:"delete file",children:Object(v.jsx)("path",{d:"M9 19c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5-17v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712zm-3 4v16h-14v-16h-2v18h18v-18h-2z"})})]})})]},n)}))})},at=I.b.div(de||(de=Object(w.a)(["\n    opacity: 0;\n    display: flex;\n"]))),rt=I.b.div(ue||(ue=Object(w.a)(["\n    display: table-row-group;\n"]))),ot=I.b.div(he||(he=Object(w.a)(["\n    border-collapse: separate;\n    cursor: pointer;\n    display: table-row;\n    background-color: var(--sidebar);\n    transition: background-color 70ms ease-in-out;\n    &:hover{ \n        /* background-color: hsl(0, 0%, 95%); */\n        background-color: var(--highlight);\n        "," {\n            opacity: 1;\n            transition: opacity 500ms ease-in-out;\n        }\n    }\n    &:focus-within{ \n        /* background-color: hsl(0, 0%, 90%); */\n        background-color: var(--highlight);\n        "," {\n            opacity: 1;\n            transition: opacity 500ms ease-in-out;\n        }\n    }\n    &:first-of-type {\n        border-top-left-radius: 10px;\n        border-bottom-left-radius: 10px;\n    }\n    &:last-of-type {\n        border-top-right-radius: 10px;\n        border-bottom-right-radius: 10px;\n    }\n"])),at,at),it=I.b.div(pe||(pe=Object(w.a)(["\n    display: table-cell;\n    padding: 15px 20px;\n    vertical-align: middle;\n    &:first-of-type {\n        border-top-left-radius: 10px;\n        border-bottom-left-radius: 10px;\n    }\n    &:last-of-type {\n        border-top-right-radius: 10px;\n        border-bottom-right-radius: 10px;\n    }\n"]))),st=Object(u.b)((function(e){return{userData:e.app.userData,currentLayer:e.app.currentLayer,rootDocs:e.app.rootDocs,layerOneDocs:e.app.layerOneDocs,layerTwoDocs:e.app.layerTwoDocs,layerThreeDocs:e.app.layerThreeDocs}}))((function(e){var t=Object(h.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],r=function(t){g.collection("users").doc(e.userData.userID).collection("files-folders").doc(String(e.projectSelectedData.docID)).update({name:c}).then((function(){i(),console.log("file rename successful"),e.setShowRenameModal(!1)})),"folder"!==e.projectSelectedData.type&&g.collection("users").doc(e.userData.userID).collection("files").doc(String(e.projectSelectedData.docID)).update({name:c}).then((function(){console.log("file rename successful"),s(t),e.setShowRenameModal(!1)}))},o={0:e.rootDocs,1:e.layerOneDocs,2:e.layerTwoDocs,3:e.layerThreeDocs},i=function(){var t=o[e.currentLayer];t[e.projectSelectedData.currentIndex].name=c,0===e.currentLayer&&e.dispatch(Y(t)),1===e.currentLayer&&e.dispatch(Q(t)),2===e.currentLayer&&e.dispatch(K(t)),3===e.currentLayer&&e.dispatch(J(t))},s=function(t){"Enter"!==t.code&&"Space"!==t.code&&"Escape"!==t.code||(t.preventDefault(),e.setShowRenameModal(!1))};return Object(v.jsx)(ft,{children:Object(v.jsxs)(jt,{"aria-label":"change ".concat(e.projectSelectedData.type," name of ").concat(e.projectSelectedData.name),isOpen:e.showRenameModal,onDismiss:function(){return e.setShowRenameModal(!1)},children:[Object(v.jsx)(lt,{label:"close rename dialog",onKeyDown:function(e){return s(e)},onMouseDown:function(){return e.setShowRenameModal(!1)},id:"rename-doc-close-button",children:Object(v.jsx)(dt,{alt:"delete",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMiAxMS4yOTNsMTAuMjkzLTEwLjI5My43MDcuNzA3LTEwLjI5MyAxMC4yOTMgMTAuMjkzIDEwLjI5My0uNzA3LjcwNy0xMC4yOTMtMTAuMjkzLTEwLjI5MyAxMC4yOTMtLjcwNy0uNzA3IDEwLjI5My0xMC4yOTMtMTAuMjkzLTEwLjI5My43MDctLjcwNyAxMC4yOTMgMTAuMjkzeiIvPjwvc3ZnPg=="})}),Object(v.jsxs)(ut,{children:["Rename ",e.projectSelectedData.type]}),Object(v.jsx)(bt,{defaultValue:e.projectSelectedData.name,autoComplete:"off",id:"rename-file-input",onChange:function(e){return a(e.target.value)}}),Object(v.jsxs)("div",{children:[Object(v.jsx)(pt,{onKeyDown:function(e){return s(e)},onMouseDown:function(){return e.setShowRenameModal(!1)},children:"Cancel"}),Object(v.jsx)(ht,{onKeyDown:function(e){"Enter"!==e.code&&"Space"!==e.code&&"Escape"!==e.code||r(e)},onMouseDown:r,children:"Rename"})]})]})})})),lt=I.b.button(be||(be=Object(w.a)(["\n    align-self: flex-end;\n"]))),dt=I.b.img(je||(je=Object(w.a)([" \n    width: 18px;\n    height: 18px;\n"]))),ut=I.b.h1(fe||(fe=Object(w.a)(["\n    font-size: 1.75rem;\n"]))),ht=I.b.button(Oe||(Oe=Object(w.a)(["\n    background-color: hsl(0, 0%, 20%);\n    height: 40px;\n    width: 130px;\n    border: none;\n    color: white;\n"]))),pt=I.b.button(xe||(xe=Object(w.a)(["\n    /* background-color: hsl(0, 0%, 95%); */\n    background-color: transparent;\n    height: 40px;\n    width: 90px;\n    border: none;\n    margin-right: 5px;\n"]))),bt=I.b.input(me||(me=Object(w.a)(["\n    width: 200px;\n    height: 40px;\n    font-size: 1.25rem;\n"]))),jt=Object(I.b)(k.a)(ge||(ge=Object(w.a)(["\n    background-color: white;\n    min-height: 400px;\n    width: 500px;\n    /* position: fixed; */\n    /* top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%); */\n    border-radius: 15px;\n    flex-direction: column;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-evenly;\n"]))),ft=I.b.div(ve||(ve=Object(w.a)(["\n"]))),Ot=Object(u.b)((function(e){return{userData:e.app.userData,outlineData:e.app.outlineData,currentFileID:e.app.currentFileID,outlineItemsForUpdate:e.app.outlineItemsForUpdate,outlineItemsDisplay:e.app.outlineItemsDisplay,currentLayer:e.app.currentLayer,rootDocs:e.app.rootDocs,layerOneDocs:e.app.layerOneDocs,layerTwoDocs:e.app.layerTwoDocs,layerThreeDocs:e.app.layerThreeDocs}}))((function(e){var t=function(e){console.log("deleting docs"),"folder"!==e.type?n(e.docID,e.currentIndex):c(e.docID,e.currentIndex)},n=function(t){g.collection("users").doc(e.userData.userID).collection("files").doc(String(t)).delete().catch((function(e){return console.log(e)})),g.collection("users").doc(e.userData.userID).collection("files-folders").doc(String(t)).delete().catch((function(e){return console.log(e)})),e.setShowDeleteModal(!1)},c=function(n){g.collection("users").doc(e.userData.userID).collection("files-folders").where("parentID","==",String(n)).get().then((function(e){e.forEach((function(e){t(e.data())}))})).then((function(){g.collection("users").doc(e.userData.userID).collection("files-folders").doc(String(n)).delete().then((function(){return null})).catch((function(e){return console.log(e)})),e.setShowDeleteModal(!1)}))},a={0:e.rootDocs,1:e.layerOneDocs,2:e.layerTwoDocs,3:e.layerThreeDocs},r=function(t){"folder"!==t.type?n(t.docID):c(t.docID),function(t){var n=Object(T.a)(a[e.currentLayer]);n.splice(t,1),0===e.currentLayer&&e.dispatch(Y(n)),1===e.currentLayer&&e.dispatch(Q(n)),2===e.currentLayer&&e.dispatch(K(n)),3===e.currentLayer&&e.dispatch(J(n))}(t.currentIndex)},o=function(t){"Enter"!==t.code&&"Space"!==t.code&&"Escape"!==t.code||(t.preventDefault(),e.setShowDeleteModal(!1))};return Object(v.jsx)("div",{children:Object(v.jsxs)(wt,{isOpen:e.showDeleteModal,onDismiss:function(){return e.setShowDeleteModal(!1)},"aria-label":"cancel delete",children:[Object(v.jsxs)(xt,{children:[Object(v.jsx)(mt,{children:"Delete ".concat(e.projectSelectedData.type)}),Object(v.jsx)(gt,{label:"close rename dialog",onKeyDown:function(e){return o(e)},onMouseDown:function(){return e.setShowDeleteModal(!1)},children:Object(v.jsx)(vt,{alt:"delete",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMiAxMS4yOTNsMTAuMjkzLTEwLjI5My43MDcuNzA3LTEwLjI5MyAxMC4yOTMgMTAuMjkzIDEwLjI5My0uNzA3LjcwNy0xMC4yOTMtMTAuMjkzLTEwLjI5MyAxMC4yOTMtLjcwNy0uNzA3IDEwLjI5My0xMC4yOTMtMTAuMjkzLTEwLjI5My43MDctLjcwNyAxMC4yOTMgMTAuMjkzeiIvPjwvc3ZnPg=="})})]}),Object(v.jsx)("p",{children:"Are you sure you want to delete ".concat(e.projectSelectedData.name,"?")}),Object(v.jsxs)("div",{children:[Object(v.jsx)(yt,{onKeyDown:function(e){return o(e)},onMouseDown:function(){return e.setShowDeleteModal(!1)},children:"Cancel"}),Object(v.jsx)(Dt,{onClick:function(){return r(e.projectSelectedData)},children:"Delete"})]})]})})})),xt=I.b.div(ye||(ye=Object(w.a)(["\n    display: flex;\n    justify-content: space-between;\n"]))),mt=I.b.h1(De||(De=Object(w.a)(["\n    font-size: 1.75rem;\n"]))),gt=I.b.button(we||(we=Object(w.a)(["\n    align-self: flex-end;\n"]))),vt=I.b.img(Ie||(Ie=Object(w.a)([" \n    width: 18px;\n    height: 18px;\n"]))),yt=I.b.button(Me||(Me=Object(w.a)(["\n    height: 50px;\n    width: 100px;\n    margin: 10px;\n    \n"]))),Dt=I.b.button(Te||(Te=Object(w.a)(["\n    margin: 10px;\n    background-color: hsl(0, 60%, 50%);\n    height: 50px;\n    width: 100px;\n    color: white;\n    /* outline-color: blue; */\n    &:focus {\n        box-shadow: 0 0 0 5px rgba(21, 156, 228, 0.4);\n    }\n"]))),wt=Object(I.b)(k.a)(Se||(Se=Object(w.a)(["\n    z-index: 100;\n    display: grid;\n    /* flex-direction: column; */\n    align-items: center;\n    justify-content: center;\n    width: 600px;\n    min-height: 300px;\n    /* position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); */\n    background-color: white;\n    isolation: isolate;\n    padding: 15px;\n    border-radius: 10px;\n"]))),It="BREADCRUMBS",Mt="SORT_METHOD";function Tt(e){return function(t){t({type:Mt,payload:e})}}function St(e){return function(t){t({type:It,payload:e})}}var Ct,kt,zt,Et,Lt,Nt,At,Pt,Rt,Ft,Ut,Bt,_t,Vt,Zt,Gt,Ht,Xt,Wt,Jt,Kt,Qt,Yt,qt,$t,en,tn,nn,cn,an,rn,on,sn,ln,dn,un,hn,pn,bn,jn,fn,On,xn,mn,gn,vn,yn,Dn,wn,In,Mn,Tn,Sn,Cn,kn,zn,En,Ln,Nn,An,Pn,Rn,Fn,Un,Bn,_n,Vn,Zn,Gn,Hn,Xn,Wn,Jn,Kn,Qn=function(e){return Object(v.jsx)(Yn,{role:"heading",children:Object(v.jsxs)(qn,{onClick:function(){return e.changeSortOrder(e.sortType)},children:[e.name,e.sortMethod===e.sortMethodValue1&&Object(v.jsx)($n,{rotate:"rotate(180deg)",children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M24 22h-24l12-20z"})})}),e.sortMethod===e.sortMethodValue2&&Object(v.jsx)($n,{rotate:"rotate(0deg)",children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M24 22h-24l12-20z"})})})]})})},Yn=I.b.div(Ce||(Ce=Object(w.a)(["\n    display: table-cell;\n    text-align: left;\n    padding: 10px 15px;\n    border-bottom: 2px solid var(--primary-text);\n    border-top: 2px solid var(--primary-text);\n    color: hsl(0, 0%, 20%);\n    font-weight: 400;\n    white-space: nowrap;\n"]))),qn=I.b.button(ke||(ke=Object(w.a)(["\n    display: flex;\n    align-items: center;\n"]))),$n=I.b.div(ze||(ze=Object(w.a)(["\n    transform: scale(.6) ",";\n    margin-left: 5px;\n"])),(function(e){return e.rotate})),ec=Object(u.b)((function(e){return{userData:e.app.userData,rootDocs:e.app.rootDocs,currentLayer:e.app.currentLayer,currentProjectID:e.app.currentProjectID,layerOneDocs:e.app.layerOneDocs,layerTwoDocs:e.app.layerTwoDocs,layerThreeDocs:e.app.layerThreeDocs,breadcrumbs:e.dashboard.breadcrumbs,sortMethod:e.dashboard.sortMethod}}))((function(e){var t=Object(h.useState)(!1),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(h.useState)(!1),o=Object(O.a)(r,2),i=o[0],s=o[1],l={0:e.rootDocs,1:e.layerOneDocs,2:e.layerTwoDocs,3:e.layerThreeDocs},d=function(t,n,c){document.activeElement.blur(),"folder"===t?g.collection("users").doc(e.userData.userID).collection("files-folders").where("parentID","==",n).get().then((function(t){var a,r=[];t.forEach((function(e){r.push(e.data())})),"dateAsc"===e.sortMethod&&(a=p),"dateDesc"===e.sortMethod&&(a=b),"typeAsc"===e.sortMethod&&(a=m),"typeDesc"===e.sortMethod&&(a=y),"nameAsc"===e.sortMethod&&(a=j),"nameDesc"===e.sortMethod&&(a=x),0===e.currentLayer?e.dispatch(Q(r.sort(a))):1===e.currentLayer?e.dispatch(K(r.sort(a))):2===e.currentLayer&&(e.dispatch(J(r.sort(a))),console.log(r)),e.dispatch(W(e.currentLayer+1));var o={name:c,docID:n},i=Object(T.a)(e.breadcrumbs);i.push(o),e.dispatch(St(i))})):u(t,n)},u=function(e,t){var n="/writing-app/edit/".concat(e,"/").concat(t);window.open(n,"_blank")||(document.location=n)},p=function(e,t){return e.lastModified-t.lastModified},b=function(e,t){return t.lastModified-e.lastModified},j=function(e,t){return t.name.localeCompare(e.name)},x=function(e,t){return e.name.localeCompare(t.name)},m=function(e,t){return t.type.localeCompare(e.type)},y=function(e,t){return e.type.localeCompare(t.type)},D=function(t){var n,c;"name"===t&&("nameDesc"===e.sortMethod?(n=j,c="nameAsc"):(n=x,c="nameDesc")),"type"===t&&("typeDesc"===e.sortMethod?(n=m,c="typeAsc"):(n=y,c="typeDesc")),"date"===t&&("dateDesc"===e.sortMethod?(n=p,c="dateAsc"):(n=b,c="dateDesc")),e.dispatch(Tt(c)),e.rootDocs.length>0&&e.dispatch(Y(e.rootDocs.sort(n))),e.layerOneDocs.length>0&&e.dispatch(Q(e.layerOneDocs.sort(n))),e.layerTwoDocs.length>0&&e.dispatch(K(e.layerTwoDocs.sort(n))),e.layerThreeDocs.length>0&&e.dispatch(J(e.layerThreeDocs.sort(n))),g.collection("users").doc(e.userData.userID).collection("files-folders").doc("preferences").update({sortMethod:c})};return Object(v.jsxs)("div",{children:[Object(v.jsxs)(cc,{role:"table",children:[Object(v.jsx)(nc,{role:"heading",children:Object(v.jsxs)(ac,{role:"rowheader",children:[Object(v.jsx)(Qn,{name:"Name",sortType:"name",sortMethodValue1:"nameDesc",sortMethodValue2:"nameAsc",sortMethod:e.sortMethod,changeSortOrder:D}),Object(v.jsx)(Qn,{name:"Type",sortType:"type",sortMethodValue1:"typeDesc",sortMethodValue2:"typeAsc",sortMethod:e.sortMethod,changeSortOrder:D}),Object(v.jsx)(Qn,{name:"Last modified",sortType:"date",sortMethodValue1:"dateDesc",sortMethodValue2:"dateAsc",sortMethod:e.sortMethod,changeSortOrder:D}),Object(v.jsx)(tc,{"aria-label":"settings",role:"heading"})]})}),Object(v.jsx)(ct,{selectItem:d,selectProject:function(t,n){e.setProjectSelectedData(Object(f.a)(Object(f.a)({},t),{},{currentIndex:n}))},showRenameProject:function(e){e.stopPropagation(),s(!0)},showDeleteProject:function(e){e.stopPropagation(),a(!0)},buttonPress:function(e,t,n,c){"Enter"!==e&&"Space"!==e||"projects-table-row"!==document.activeElement.id||d(t,n,c)},currentLayer:e.currentLayer,folderMap:l})]}),Object(v.jsx)(st,{showRenameModal:i,projectSelectedData:e.projectSelectedData,setShowRenameModal:s}),Object(v.jsx)(Ot,{showDeleteModal:c,projectSelectedData:e.projectSelectedData,setShowDeleteModal:a})]})})),tc=I.b.div(Ct||(Ct=Object(w.a)(["\n    display: table-cell;\n    text-align: left;\n    padding: 10px 15px;\n    border-bottom: 2px solid var(--primary-text);\n    border-top: 2px solid var(--primary-text);\n    color: hsl(0, 0%, 20%);\n    font-weight: 400;\n    white-space: nowrap;\n"]))),nc=I.b.div(kt||(kt=Object(w.a)(["\n    display: table-header-group;\n"]))),cc=I.b.div(zt||(zt=Object(w.a)(["\n    display: table;\n    width: 100%;\n    max-width: 100%;\n    border-collapse: separate;\n    border-spacing: 0 10px;\n"]))),ac=I.b.div(Et||(Et=Object(w.a)(["\n    display: table-row;\n    background-color: transparent;\n"]))),rc=Object(u.b)((function(e){return{userData:e.app.userData,projects:e.dashboard.projects}}))((function(e){var t=Object(h.useState)(!1),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(h.useState)({}),o=Object(O.a)(r,2),i=o[0],s=o[1],l=Object(h.useState)(""),d=Object(O.a)(l,2),u=d[0],p=d[1];Object(h.useEffect)((function(){e.userData.userID&&D()}),[e.userData]);var b=function(e,t){return e.lastModified-t.lastModified},j=function(e,t){return t.lastModified-e.lastModified},f=function(e,t){return t.name.localeCompare(e.name)},x=function(e,t){return e.name.localeCompare(t.name)},m=function(e,t){return t.name.localeCompare(e.name)},y=function(e,t){return e.type.localeCompare(t.type)},D=function(){g.collection("users").doc(e.userData.userID).collection("files-folders").where("parentID","==",e.userData.userID).get().then((function(t){var n,c=[];return t.forEach((function(t){var a=t.data();a.sortMethod?(n=a.sortMethod,e.dispatch(Tt(a.sortMethod))):c.push(a)})),e.dispatch(W(0)),"dateAsc"===n?e.dispatch(Y(c.sort(b))):"dateDesc"===n?e.dispatch(Y(c.sort(j))):"nameAsc"===n?e.dispatch(Y(c.sort(f))):"nameDesc"===n?e.dispatch(Y(c.sort(x))):"typeAsc"===n?e.dispatch(Y(c.sort(m))):"typeDesc"===n?e.dispatch(Y(c.sort(y))):void 0}))},w=function(e){a(!0),p(e)};return Object(v.jsxs)(oc,{children:[Object(v.jsx)(Ee,{isCreateProjectModal:c,projectSelectedData:i,setProjectSelectedData:s,createType:u,getProjects:D,setIsCreateProjectModal:a}),Object(v.jsxs)(Ve.a,{children:[Object(v.jsxs)(sc,{children:[Object(v.jsx)(ic,{children:"+"})," Create new"]}),Object(v.jsxs)(lc,{children:[Object(v.jsx)(Ze,{docType:"folder",openModal:w,children:Object(v.jsx)("path",{d:"M6.083 4c1.38 1.612 2.578 3 4.917 3h11v13h-20v-16h4.083zm.917-2h-7v20h24v-17h-13c-1.629 0-2.305-1.058-4-3z"})}),Object(v.jsx)(Ze,{docType:"screenplay",openModal:w,children:Object(v.jsx)("path",{d:"M21.155 8.64c-.909 1.519-2.327 3.067-4.097 3.004-.413.706-.852 1.677-1.339 2.803l-1.312.553c.936-2.343 2.231-4.961 3.698-6.994-.67.529-1.746 1.637-2.662 2.783-1.098-1.828-.3-3.691.973-5.179.021.641.359 1.196.601 1.475-.087-.53-.114-1.489.195-2.351.718-.732 1.364-1.271 2.113-1.76-.083.478.08 1.026.262 1.361.024-.49.224-1.43.521-1.84.924-.727 2.332-1.373 3.892-1.495-.081.973-.436 2.575-1.024 3.604-.515.404-1.221.68-1.791.833.493.089 1.031.077 1.494-.001-.269.743-.552 1.428-.998 2.276-.679.468-1.578.732-2.203.825.46.187 1.272.245 1.677.103zm-13.841 3.805l.645.781 4.773-2.791-.668-.768-4.75 2.778zm6.96-.238l-.668-.767-4.805 2.808.645.781 4.828-2.822zm4.679.007c-.421.203-.851.341-1.286.398-.12.231-.246.494-.377.773l.298.342c.623.692.459 1.704-.376 2.239-.773.497-5.341 3.376-6.386 4.035-.074-.721-.358-1.391-.826-1.948-.469-.557-6.115-7.376-7.523-9.178-.469-.6-.575-1.245-.295-1.816.268-.549.842-.918 1.43-.918.919 0 1.408.655 1.549 1.215.16.641-.035 1.231-.623 1.685l1.329 1.624 7.796-4.446c1.422-1.051 1.822-2.991.93-4.513-.618-1.053-1.759-1.706-2.978-1.706-1.188 0-.793-.016-9.565 4.475-1.234.591-2.05 1.787-2.05 3.202 0 .87.308 1.756.889 2.487 1.427 1.794 7.561 9.185 7.616 9.257.371.493.427 1.119.15 1.673-.277.555-.812.886-1.429.886-.919 0-1.408-.655-1.549-1.216-.156-.629.012-1.208.604-1.654l-1.277-1.545c-.822.665-1.277 1.496-1.377 2.442-.232 2.205 1.525 3.993 3.613 3.993.596 0 1.311-.177 1.841-.51l9.427-5.946c.957-.664 1.492-1.781 1.492-2.897 0-.745-.24-1.454-.688-2.003l-.359-.43zm-7.933-10.062c.188-.087.398-.134.609-.134.532 0 .997.281 1.243.752.312.596.226 1.469-.548 1.912l-5.097 2.888c-.051-1.089-.579-2.081-1.455-2.732l5.248-2.686zm2.097 13.383l.361-.905.249-.609-3.449 2.017.645.781 2.194-1.284z"})}),Object(v.jsx)(Ze,{docType:"outline",openModal:w,children:Object(v.jsx)("path",{d:"M4 4v20h20v-20h-20zm18 18h-16v-13h16v13zm-3-3h-10v-1h10v1zm0-3h-10v-1h10v1zm0-3h-10v-1h10v1zm2-11h-19v19h-2v-21h21v2z"})}),Object(v.jsx)(Ze,{docType:"notes",openModal:w,children:Object(v.jsx)("path",{d:"M4 22v-20h16v11.543c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362zm18-7.614v-14.386h-20v24h10.189c3.163 0 9.811-7.223 9.811-9.614zm-5-1.386h-10v-1h10v1zm0-4h-10v1h10v-1zm0-3h-10v1h10v-1z"})})]})]}),Object(v.jsx)(ec,{projectSelectedData:i,setProjectSelectedData:s})]})})),oc=I.b.div(Lt||(Lt=Object(w.a)(["\n    width: 75vw;\n"]))),ic=I.b.span(Nt||(Nt=Object(w.a)(["\n    font-size: 1.75rem;\n    margin-right: 5px;\n    background-color: inherit;\n    color: inherit;\n"]))),sc=Object(I.b)(Ve.b)(At||(At=Object(w.a)(["\n    background-color: var(--primary-text);\n    color: var(--sidebar);\n    padding: 8px 15px;\n    border-radius: 10px;\n    margin: 0px 0 20px 0;\n    display: flex;\n    align-items: center;\n    font-size: .875rem;\n"]))),lc=Object(I.b)(Ve.d)(Pt||(Pt=Object(w.a)(["\n    min-width: 100px;\n    background-color: var(--sidebar);\n"]))),dc=Object(u.b)((function(e){return{userData:e.app.userData,showProjects:e.dashboard.showProjects}}))((function(e){Object(h.useEffect)((function(){t()}),[e.userData]);var t=function(){g.collection("users").doc(e.userData.userID).collection("projects").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data())}))}))};return Object(v.jsx)("div",{children:Object(v.jsx)(rc,{})})})),uc=n(32),hc=Object(u.b)((function(e){return{userData:e.app.userData,projects:e.dashboard.projects,projectFiles:e.app.projectFiles,dashboardCurrentSection:e.app.dashboardCurrentSection}}))((function(e){var t=function(t){return e.dispatch((n=t,function(e){e({type:U,payload:n})}));var n};return Object(v.jsxs)(bc,{children:[Object(v.jsx)(mc,{children:"Redraft"}),Object(v.jsxs)(fc,{children:[Object(v.jsx)(jc,{children:Object(v.jsx)(uc.b,{style:{textDecoration:"none"},to:"/writing-app/dashboard",children:Object(v.jsxs)(Oc,{onClick:function(){return t("projects")},background:"projects"===e.dashboardCurrentSection?"var(--highlight)":"transparent",hover:"projects"!==e.dashboardCurrentSection?"var(--highlight)":"transparent",children:[Object(v.jsx)(xc,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M6 22v-16h16v7.543c0 4.107-6 2.457-6 2.457s1.518 6-2.638 6h-7.362zm18-7.614v-10.386h-20v20h10.189c3.163 0 9.811-7.223 9.811-9.614zm-10 1.614h-5v-1h5v1zm5-4h-10v1h10v-1zm0-3h-10v1h10v-1zm2-7h-19v19h-2v-21h21v2z"})})}),Object(v.jsx)(pc,{children:"All files"})]})})}),Object(v.jsx)(jc,{children:Object(v.jsxs)(Oc,{onClick:function(){return t("analytics")},background:"analytics"===e.dashboardCurrentSection?"var(--highlight)":"transparent",hover:"analytics"!==e.dashboardCurrentSection?"var(--highlight)":"transparent",children:[Object(v.jsx)(xc,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M13 12.414v-12.364c6.158.51 11 5.66 11 11.95 0 6.627-5.373 12-12 12-2.953 0-5.654-1.072-7.744-2.842l8.744-8.744zm-2-12.364c-6.158.51-11 5.66-11 11.95 0 2.954 1.072 5.654 2.842 7.745l1.42-1.42c-1.412-1.725-2.262-3.928-2.262-6.325 0-5.177 3.953-9.446 9-9.949v-2.001z"})})}),Object(v.jsx)(pc,{children:"Analytics"})]})}),Object(v.jsx)(jc,{children:Object(v.jsx)(uc.b,{style:{textDecoration:"none"},to:"/writing-app/dashboard/settings",children:Object(v.jsxs)(Oc,{onClick:function(){return t("settings")},background:"settings"===e.dashboardCurrentSection?"var(--highlight)":"transparent",hover:"settings"!==e.dashboardCurrentSection?"var(--highlight)":"transparent",children:[Object(v.jsx)(xc,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M24 14.187v-4.374c-2.148-.766-2.726-.802-3.027-1.529-.303-.729.083-1.169 1.059-3.223l-3.093-3.093c-2.026.963-2.488 1.364-3.224 1.059-.727-.302-.768-.889-1.527-3.027h-4.375c-.764 2.144-.8 2.725-1.529 3.027-.752.313-1.203-.1-3.223-1.059l-3.093 3.093c.977 2.055 1.362 2.493 1.059 3.224-.302.727-.881.764-3.027 1.528v4.375c2.139.76 2.725.8 3.027 1.528.304.734-.081 1.167-1.059 3.223l3.093 3.093c1.999-.95 2.47-1.373 3.223-1.059.728.302.764.88 1.529 3.027h4.374c.758-2.131.799-2.723 1.537-3.031.745-.308 1.186.099 3.215 1.062l3.093-3.093c-.975-2.05-1.362-2.492-1.059-3.223.3-.726.88-.763 3.027-1.528zm-4.875.764c-.577 1.394-.068 2.458.488 3.578l-1.084 1.084c-1.093-.543-2.161-1.076-3.573-.49-1.396.581-1.79 1.693-2.188 2.877h-1.534c-.398-1.185-.791-2.297-2.183-2.875-1.419-.588-2.507-.045-3.579.488l-1.083-1.084c.557-1.118 1.066-2.18.487-3.58-.579-1.391-1.691-1.784-2.876-2.182v-1.533c1.185-.398 2.297-.791 2.875-2.184.578-1.394.068-2.459-.488-3.579l1.084-1.084c1.082.538 2.162 1.077 3.58.488 1.392-.577 1.785-1.69 2.183-2.875h1.534c.398 1.185.792 2.297 2.184 2.875 1.419.588 2.506.045 3.579-.488l1.084 1.084c-.556 1.121-1.065 2.187-.488 3.58.577 1.391 1.689 1.784 2.875 2.183v1.534c-1.188.398-2.302.791-2.877 2.183zm-7.125-5.951c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.762 0-5 2.238-5 5s2.238 5 5 5 5-2.238 5-5-2.238-5-5-5z"})})}),Object(v.jsx)(pc,{children:"Settings"})]})})}),Object(v.jsx)(jc,{children:Object(v.jsxs)(Oc,{onClick:function(){return t("deleted")},background:"deleted"===e.dashboardCurrentSection?"var(--highlight)":"transparent",hover:"deleted"!==e.dashboardCurrentSection?"var(--highlight)":"transparent",children:[Object(v.jsx)(xc,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M9 19c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5-17v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712zm-3 4v16h-14v-16h-2v18h18v-18h-2z"})})}),Object(v.jsx)(pc,{children:"Deleted"})]})})]})]})})),pc=I.b.p(Rt||(Rt=Object(w.a)(["\n    /* text-decoration: none; */\n"]))),bc=I.b.div(Ft||(Ft=Object(w.a)(["\n    width: 18vw;\n    /* margin: 0 0 0 20px; */\n    padding: 0 20px;\n    /* background-color: hsl(0, 0%, 97%); */\n    background-color: var(--sidebar);\n    height: 100vh;\n    /* margin-top: 115px; */\n"]))),jc=I.b.li(Ut||(Ut=Object(w.a)(["\n"]))),fc=I.b.ul(Bt||(Bt=Object(w.a)(["\n"]))),Oc=I.b.button(_t||(_t=Object(w.a)(["\n    background-color: ",";\n    display: flex;\n    border: none;\n    padding: 10px 0;\n    font-size: 1.25rem;\n    width: 100%;\n    border-radius: 5px;\n    transition: background-color 50ms ease-in-out;\n    &:hover {\n        background-color: ",";\n    }\n"])),(function(e){return e.background}),(function(e){return e.hover})),xc=I.b.div(Vt||(Vt=Object(w.a)(["\n    transform: scale(.8);\n    margin-right: 7px;\n    position: relative;\n    top: -3px;\n"]))),mc=I.b.h1(Zt||(Zt=Object(w.a)(["\n    font-size: 1.5rem;\n    font-weight: 700;\n    display: grid;\n    justify-content: center;\n    padding: 20px;\n    margin: 30px 0 70px 0;\n"]))),gc=n(25),vc=Object(u.b)((function(e){return{userData:e.app.userData,colorThemes:e.app.colorThemes}}))((function(e){var t=Object(h.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],r=function(t){var n,c=document.getElementById(t).value;e.dispatch(X(Object(f.a)(Object(f.a)({},e.colorThemes),{},(n={},Object(gc.a)(n,t,c),Object(gc.a)(n,"name",null),n)))),g.collection("users").doc(e.userData.userID).update(Object(gc.a)({},"preferences.colors."+t,c)).catch((function(e){return console.log(e)}))};return Object(v.jsxs)(yc,{children:[Object(v.jsx)("h1",{children:"Change colors"}),Object(v.jsxs)(Dc,{children:[Object(v.jsxs)(wc,{children:[Object(v.jsx)("label",{htmlFor:"background",children:"Background:"}),Object(v.jsx)("input",{defaultValue:e.colorThemes.background,onChange:function(){return r("background")},type:"color",id:"background"})]}),Object(v.jsxs)(wc,{children:[Object(v.jsx)("label",{htmlFor:"primaryText",children:"Primary text:"}),Object(v.jsx)("input",{defaultValue:e.colorThemes.primaryText,onChange:function(){return r("primaryText")},type:"color",id:"primaryText"})]}),Object(v.jsxs)(wc,{children:[Object(v.jsx)("label",{htmlFor:"sidebar",children:"Sidebar:"}),Object(v.jsx)("input",{defaultValue:e.colorThemes.sidebar,onChange:function(){return r("sidebar")},type:"color",id:"sidebar"})]}),Object(v.jsxs)(wc,{children:[Object(v.jsx)("label",{htmlFor:"highlight",children:"Highlight:"}),Object(v.jsx)("input",{defaultValue:e.colorThemes.highlight,onChange:function(){return r("highlight")},type:"color",id:"highlight"})]})]}),Object(v.jsx)("input",{onChange:function(e){return a(e.target.value)}}),Object(v.jsx)("button",{onClick:function(){var t={background:document.getElementById("background").value,primaryText:document.getElementById("primaryText").value,sidebar:document.getElementById("sidebar").value,highlight:document.getElementById("highlight").value,name:c};e.addTheme({colors:t}),g.collection("users").doc(e.userData.userID).collection("page-preferences").doc("color-themes").update({themes:x.a.firestore.FieldValue.arrayUnion({colors:t})})},children:"Save theme"})]})})),yc=I.b.div(Gt||(Gt=Object(w.a)(["\n\n"]))),Dc=I.b.div(Ht||(Ht=Object(w.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    margin: 40px 0;\n    gap: 30px;\n"]))),wc=I.b.div(Xt||(Xt=Object(w.a)(["\n\n"]))),Ic=function(e){return Object(v.jsxs)(kc,{isSelected:e.theme.colors.name,children:[Object(v.jsx)(Sc,{onClick:function(){return e.selectTheme(e.theme.colors)},children:e.theme.colors.name}),!1===e.theme.colors.isDefault&&Object(v.jsx)(Cc,{children:"X"}),Object(v.jsx)(Tc,{children:Object.entries(e.theme.colors).map((function(e,t){return"name"!==e[0]&&"isDefault"!==e[0]&&Object(v.jsx)(Mc,{backgroundColor:e[1]},t)}))})]})},Mc=I.b.div(Wt||(Wt=Object(w.a)(["\n    background-color: ",";\n    height: 15px;\n    width: 15px;\n    border: 1px solid var(--primary-text);\n"])),(function(e){return e.backgroundColor})),Tc=I.b.div(Jt||(Jt=Object(w.a)(["\n    display: flex;\n    gap: 5px;\n"]))),Sc=I.b.button(Kt||(Kt=Object(w.a)(["\n\n"]))),Cc=I.b.button(Qt||(Qt=Object(w.a)(["\n\n"]))),kc=I.b.article(Yt||(Yt=Object(w.a)(["\n    background-color: var(--sidebar);\n    padding: 10px;\n    margin: 5px 5px 5px 0px;\n    width: 200px;\n    height: 50px;\n    outline: ","\n"])),(function(e){return null===e.isSelected?"transparent":"1px solid white"})),zc=Object(u.b)((function(e){return{userData:e.app.userData,colorThemes:e.app.colorThemes}}))((function(e){var t=function(t){Object.entries(t).forEach((function(e){"name"!==e[0]&&"isDefault"!==e[0]&&(document.getElementById(e[0]).value=e[1])})),e.dispatch(X(t)),g.collection("users").doc(e.userData.userID).update({"preferences.colors":t}).catch((function(e){return console.log(e)}))};return Object(v.jsxs)("div",{children:["Color Themes:",Object(v.jsx)(Ec,{children:e.themes.map((function(e,n){return Object(v.jsx)(Ic,{selectTheme:t,theme:e},n)}))})]})})),Ec=I.b.div(qt||(qt=Object(w.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n"]))),Lc=Object(u.b)((function(e){return{userData:e.app.userData}}))((function(e){var t=Object(h.useState)([]),n=Object(O.a)(t,2),c=n[0],a=n[1];Object(h.useEffect)((function(){g.collection("users").doc(e.userData.userID).collection("page-preferences").doc("color-themes").get().then((function(e){a(e.data().themes)}))}),[]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(vc,{addTheme:function(e){var t=Object(T.a)(c);t.push(e),a(t)}}),Object(v.jsx)(zc,{themes:c})]})})),Nc=function(){return Object(v.jsx)("div",{children:Object(v.jsx)(Lc,{})})},Ac=Object(u.b)((function(e){return{breadcrumbs:e.dashboard.breadcrumbs,currentLayer:e.app.currentLayer,rootLayer:e.app.rootLayer,layerOneDocs:e.app.layerOneDocs,layerTwoDocs:e.app.layerTwoDocs,layerThreeDocs:e.app.layerThreeDocs}}))((function(e){return Object(v.jsx)(Rc,{children:e.breadcrumbs.map((function(t,n){return Object(v.jsx)(Pc,{onClick:function(){return function(t){e.dispatch(W(t));var n=Object(T.a)(e.breadcrumbs).slice(0,t+1);e.dispatch(St(n)),t<=0&&e.dispatch(Q([])),t<=1&&e.dispatch(K([])),t<=2&&e.dispatch(J([]))}(n)},children:t.name},n)}))})})),Pc=I.b.button($t||($t=Object(w.a)(['\n    cursor: pointer;\n    font-size: 1.75rem;\n    font-weight: 500;\n    &:not(:first-of-type) {\n        margin-left: 5px;\n        &:before {\n            margin-right: 5px;\n            content: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSAzbDMuMDU3LTMgMTEuOTQzIDEyLTExLjk0MyAxMi0zLjA1Ny0zIDktOXoiLz48L3N2Zz4=");\n        }\n    }\n    &:not(:last-of-type) {\n        margin-left: 5px;\n        opacity: 0.6;\n        font-size: 1.7rem;\n        font-weight: 400;\n    }\n    &:hover{\n        opacity: 1;\n    }\n']))),Rc=I.b.nav(en||(en=Object(w.a)(["\n    display: flex;\n    margin: 20px 0;\n"]))),Fc=Object(u.b)((function(e){return{showProjects:e.dashboard.showProjects}}))((function(){return Object(v.jsxs)(Bc,{children:[Object(v.jsx)(hc,{}),Object(v.jsxs)(Uc,{children:[Object(v.jsx)(M.a,{exact:!0,path:"/writing-app/dashboard",render:function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(Ac,{}),Object(v.jsx)(dc,Object(f.a)({},e))]})}}),Object(v.jsx)(M.a,{exact:!0,path:"/writing-app/dashboard/settings",render:function(e){return Object(v.jsx)(Nc,Object(f.a)({},e))}})]})]})})),Uc=I.b.div(tn||(tn=Object(w.a)(["\n    padding: 0 10px 0 50px;\n"]))),Bc=I.b.div(nn||(nn=Object(w.a)(["\n    /* width: 100vw;  */\n    display: flex;\n"]))),_c=Object(u.b)((function(e){return{userData:e.app.userData,outlineData:e.app.outlineData,currentFileID:e.app.currentFileID,outlineItemsDisplay:e.app.outlineItemsDisplay,outlineItemsForUpdate:e.app.outlineItemsForUpdate}}))((function(e){var t=Object(h.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(h.useState)(""),o=Object(O.a)(r,2),i=o[0],s=o[1];return Object(v.jsxs)(Wc,{onDismiss:function(){return e.setShowEditModal(!1)},"aria-label":"edit card",isOpen:e.showEditModal,children:[Object(v.jsx)(Vc,{children:"Edit card"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Hc,{autoComplete:"off",onChange:function(e){return a(e.target.value)},id:"edit-card-modal-title",defaultValue:e.title}),Object(v.jsx)("div",{style:{marginBottom:"20px"}}),Object(v.jsx)(Xc,{onChange:function(e){return s(e.target.value)},id:"edit-card-modal-text",defaultValue:e.text})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Zc,{onKeyDown:function(t){return function(t){"Enter"!==t.code&&"Space"!==t.code&&"Escape"!==t.code||(t.preventDefault(),e.setShowEditModal(!1),document.getElementById("card-edit-button-".concat(e.cardIndex)).focus())}(t)},onMouseDown:function(){return e.setShowEditModal(!1)},children:"Cancel"}),Object(v.jsx)(Gc,{onClick:function(){var t={index:e.cardIndex,title:c||e.title,text:i||e.text},n=Object(T.a)(e.outlineItemsForUpdate),a=Object(T.a)(e.outlineItemsDisplay);n[e.cardIndex]=t,a[e.itemIndexes[e.cardIndex]]=t,e.dispatch($(Object(T.a)(a))),e.dispatch(q(n)),g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).update({data:n}).then((function(){e.setShowEditModal(!1)})).catch((function(e){console.log(e)})),C(e.userData.userID,String(e.outlineData.docID),e.match.params.fileID)},children:"Save"})]})]})})),Vc=I.b.h1(cn||(cn=Object(w.a)(["\n    font-size: 1.75rem;\n"]))),Zc=I.b.button(an||(an=Object(w.a)(["\n    height: 50px;\n    width: 100px;\n    margin: 10px;\n    \n"]))),Gc=I.b.button(rn||(rn=Object(w.a)(["\n    margin: 10px;\n    background-color: hsl(0, 0%, 20%);\n    height: 50px;\n    width: 100px;\n    color: white;\n"]))),Hc=I.b.input(on||(on=Object(w.a)(["\n    width: 500px;\n    height: 40px;\n"]))),Xc=I.b.textarea(sn||(sn=Object(w.a)(["\n    width: 500px;\n    height: 100px;\n"]))),Wc=Object(I.b)(k.a)(ln||(ln=Object(w.a)(["\n    display: grid;\n    /* flex-direction: column; */\n    z-index: 100;\n    align-items: center;\n    justify-content: center;\n    width: 600px;\n    min-height: 350px;\n    /* position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); */\n    background-color: white;\n    isolation: isolate;\n    padding: 15px;\n    border-radius: 10px;\n"]))),Jc=Object(u.b)((function(e){return{userData:e.app.userData,outlineData:e.app.outlineData,currentFileID:e.app.currentFileID,outlineItemsForUpdate:e.app.outlineItemsForUpdate,outlineItemsDisplay:e.app.outlineItemsDisplay}}))((function(e){return Object(v.jsxs)(qc,{"aria-label":"delete card dialog",isOpen:e.showDeleteModal,onDismiss:function(){return e.setShowDeleteModal(!1)},children:[Object(v.jsx)(Kc,{children:"Delete card"}),Object(v.jsx)("p",{children:"Are you sure you want to delete this card?"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Qc,{onKeyDown:function(t){"Enter"!==t.code&&"Space"!==t.code&&"Escape"!==t.code||(t.preventDefault(),e.setShowDeleteModal(!1),document.getElementById("card-delete-button-".concat(e.cardIndex)).focus())},onMouseDown:function(){return e.setShowDeleteModal(!1)},children:"Cancel"}),Object(v.jsx)(Yc,{onClick:function(){var t=Object(T.a)(e.outlineItemsForUpdate);t.splice(e.cardIndex,1);var n=t.map((function(e,t){return Object(f.a)(Object(f.a)({},e),{},{index:t})}));e.dispatch(q(n)),e.dispatch($(n));for(var c=[],a=0;a<e.itemIndexes.length-1;a++)c.push(String(a));e.setItemIndexes(c),g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).update({data:n}).then((function(){e.setShowDeleteModal(!1)})).catch((function(e){console.log(e)})),C(e.userData.userID,String(e.outlineData.docID),e.match.params.fileID)},children:"Delete"})]})]})})),Kc=I.b.h1(dn||(dn=Object(w.a)(["\n    font-size: 1.75rem;\n"]))),Qc=I.b.button(un||(un=Object(w.a)(["\n    height: 50px;\n    width: 100px;\n    margin: 10px;\n    \n"]))),Yc=I.b.button(hn||(hn=Object(w.a)(["\n    margin: 10px;\n    background-color: hsl(0, 60%, 50%);\n    height: 50px;\n    width: 100px;\n    color: white;\n"]))),qc=Object(I.b)(k.a)(pn||(pn=Object(w.a)(["\n    z-index: 100;\n    display: grid;\n    /* flex-direction: column; */\n    align-items: center;\n    justify-content: center;\n    width: 600px;\n    min-height: 300px;\n    /* position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); */\n    background-color: white;\n    isolation: isolate;\n    padding: 15px;\n    border-radius: 10px;\n"]))),$c=Object(u.b)((function(e){return{userData:e.app.userData,outlineData:e.app.outlineData,currentFileID:e.app.currentFileID,outlineItemsForUpdate:e.app.outlineItemsForUpdate,outlineItemsDisplay:e.app.outlineItemsDisplay}}))((function(e){var t=Object(h.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(h.useState)(""),o=Object(O.a)(r,2),i=o[0],s=o[1],l=Object(h.useState)(),d=Object(O.a)(l,2),u=d[0],p=d[1];Object(h.useEffect)((function(){var t;p((null===e||void 0===e||null===(t=e.outlineItemsForUpdate)||void 0===t?void 0:t.length)+1)}),[e.outlineItemsForUpdate]);return Object(v.jsxs)(ia,{"aria-label":"create card",isOpen:e.showCreateModal,onDismiss:function(){return e.setShowCreateModal(!1)},children:[Object(v.jsx)(ea,{children:"Create new card"}),Object(v.jsx)(aa,{children:"Title"}),Object(v.jsx)(na,{onChange:function(e){return a(e.target.value)}}),Object(v.jsx)(aa,{children:"Description"}),Object(v.jsx)(ta,{onChange:function(e){return s(e.target.value)}}),Object(v.jsx)(aa,{children:"Insert at location:"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(ca,{defaultValue:e.outlineItemsForUpdate.length+1,id:"create-card-location",onChange:function(e){return p(e.target.value)}})," / ",e.outlineItemsDisplay.length+1]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(ra,{onClick:function(){return e.setShowCreateModal(!1)},children:"Cancel"}),Object(v.jsx)(oa,{onClick:function(){var t=0;e.outlineItemsForUpdate&&(t=e.outlineItemsForUpdate.length);var n={title:c,text:i,index:u},a=Object(T.a)(e.outlineItemsForUpdate),r=Object(T.a)(e.itemIndexes);a.splice(u-1,0,n);var o=a.map((function(e,t){return Object(f.a)(Object(f.a)({},e),{},{index:t})}));r.splice(u,0,String(t));for(var s=[],l=0;l<e.itemIndexes.length+1;l++)s.push(String(l));e.setItemIndexes(s),e.dispatch($(o)),e.dispatch(q(o)),g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).update({data:o}).then((function(){e.setShowCreateModal(!1)})),C(e.userData.userID,String(e.outlineData.docID),e.match.params.fileID)},children:"Create"})]})]})})),ea=I.b.h1(bn||(bn=Object(w.a)(["\n    font-size: 1.75rem;\n    margin-bottom: 36px;\n"]))),ta=I.b.textarea(jn||(jn=Object(w.a)(["\n    width: 40vw;\n    height: 150px;\n    margin-bottom: 36px;\n"]))),na=I.b.input(fn||(fn=Object(w.a)(["\n    width: 40vw;\n    height: 40px;\n    margin-bottom: 36px;\n"]))),ca=I.b.input(On||(On=Object(w.a)(["\n    width: 50px;\n    height: 40px;\n    margin-bottom: 36px;\n"]))),aa=I.b.label(xn||(xn=Object(w.a)(["\n"]))),ra=I.b.button(mn||(mn=Object(w.a)(["\n    height: 50px;\n    width: 100px;\n    margin: 10px;\n"]))),oa=I.b.button(gn||(gn=Object(w.a)(["\n    margin: 10px;\n    background-color: hsl(0, 0%, 20%);\n    height: 50px;\n    width: 100px;\n    color: white;\n"]))),ia=Object(I.b)(k.a)(vn||(vn=Object(w.a)(["\n    z-index: 100;\n    display: grid;\n    /* flex-direction: column; */\n    align-items: center;\n    justify-content: center;\n    width: 700px;\n    min-height: 300px;\n    /* position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); */\n    background-color: white;\n    isolation: isolate;\n    padding: 50px 15px;\n    border-radius: 10px;\n"]))),sa=n(18),la=n(43),da=function(e){var t=function(t,n){e.setTitle(t),e.setText(n),e.setShowEditModal(!0),e.setCardIndex(e.index)},n=function(){e.setShowDeleteModal(!0),e.setCardIndex(e.index)};return Object(v.jsxs)(va,Object(f.a)(Object(f.a)({},e),{},{ref:e.innerRef,children:[Object(v.jsxs)(ja,{children:[Object(v.jsx)(ma,{children:e.title}),Object(v.jsxs)(fa,{children:[Object(v.jsxs)(ba,{children:[Object(v.jsxs)(Oa,{id:"card-edit-button-".concat(e.index),role:"button",onClick:function(){return t(e.title,e.text)},onKeyDown:function(n){return function(e,n,c){"Enter"!==e.key&&"Space"!==e.key||(t(n,c),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.preventDefault())}(n,e.title,e.text)},children:[Object(v.jsx)(ua,{children:"Rename"}),Object(v.jsx)(ha,{}),Object(v.jsx)(xa,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M18.363 8.464l1.433 1.431-12.67 12.669-7.125 1.436 1.439-7.127 12.665-12.668 1.431 1.431-12.255 12.224-.726 3.584 3.584-.723 12.224-12.257zm-.056-8.464l-2.815 2.817 5.691 5.692 2.817-2.821-5.693-5.688zm-12.318 18.718l11.313-11.316-.705-.707-11.313 11.314.705.709z"})})})]}),Object(v.jsxs)(Oa,{id:"card-delete-button-".concat(e.index),role:"button",onClick:n,onKeyDown:function(e){return function(e){"Enter"!==e.key&&"Space"!==e.key||(n(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.preventDefault())}(e)},children:[Object(v.jsx)(ua,{children:"Delete"}),Object(v.jsx)(ha,{}),Object(v.jsx)(xa,{children:Object(v.jsx)(Be,{children:Object(v.jsx)("path",{d:"M9 19c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5-17v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712zm-3 4v16h-14v-16h-2v18h18v-18h-2z"})})})]})]}),Object(v.jsx)(pa,{children:e.index+1})]})]}),Object(v.jsx)("div",{}),Object(v.jsx)(ga,{children:e.text})]}))},ua=I.b.div(yn||(yn=Object(w.a)(["\n    transition: opacity 200ms ease-in-out;\n    opacity: 0;\n    background-color: hsl(0, 0%, 10%);\n    height: 30px;\n    min-width: 50px;\n    position: absolute;\n    z-index: 10;\n    top: 160%;\n    left: 50%;\n    transform: translate(-50%, -50%); \n    border-radius: 5px;\n    color: white;\n    vertical-align: middle;\n    padding: 5px 10px;\n    font-size: 1rem;\n"]))),ha=I.b.div(Dn||(Dn=Object(w.a)(["\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n    /* background-color: lightblue; */\n    background-color: var(--background);\n    height: 35px;\n    width: 35px;\n    position: relative;\n    border-radius: 50%;\n    &:hover{\n        opacity: 1;\n    }\n    &:focus{\n        opacity: 1;\n    }\n"]))),pa=I.b.p(wn||(wn=Object(w.a)(["\n    position: relative;\n    top: 3px;\n    margin-left: 8px;\n    /* color: hsl(0, 0%, 40%); */\n    color: var(--primary-text);\n    &::after {\n        content: '.'\n    }\n"]))),ba=I.b.div(In||(In=Object(w.a)(["\n    opacity: 0;\n    transition: opacity 300ms ease-in-out;\n"]))),ja=I.b.div(Mn||(Mn=Object(w.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n"]))),fa=I.b.div(Tn||(Tn=Object(w.a)(["\n    display: flex;\n    justify-content: flex-end;\n    position: relative;\n    top: -10px;\n    &:focus-within {\n        "," {\n            opacity: 1;\n        }\n    }\n"])),ba),Oa=I.b.button(Sn||(Sn=Object(w.a)(["\n    position: relative;\n    margin-right: 10px;\n    &:hover{\n        "," {\n            opacity: 1;\n        }\n        "," {\n            opacity: 1;\n        }\n    }\n    &:focus{\n        "," {\n            opacity: 1;\n        }\n        "," {\n            opacity: 1;\n        }\n    }\n"])),ha,ua,ha,ua),xa=I.b.div(Cn||(Cn=Object(w.a)([" \n    transform: translate(-50%, -50%) scale(.7);\n    z-index: 100;\n    top: 50%;\n    left: 50%;\n    position: absolute;\n    /* transform: ; */\n"]))),ma=I.b.h1(kn||(kn=Object(w.a)(["\n    font-size: 1rem;\n    /* color: hsl(0, 0%, 40%); */\n    color: var(--primary-text);\n    margin-bottom: 20px;\n"]))),ga=I.b.h2(zn||(zn=Object(w.a)(["\n    font-size: 1.25rem;\n    line-height: 1.5;\n"]))),va=I.b.article(En||(En=Object(w.a)(["\n    font-size: 1.3rem; \n    /* background-color: hsl(0, 0%, 95%);  */\n    background-color: var(--sidebar);\n    padding: 30px;\n    display: flex;\n    border-radius: 15px;\n    flex-direction: column;\n    width: auto;\n    min-height: 200px;\n    height: 100%;\n    cursor: move;\n    &:hover {\n        "," {\n            opacity: 1;\n        }\n    }\n"])),ba),ya=n(14),Da=Object(u.b)((function(e){return{outlineItemsDisplay:e.app.outlineItemsDisplay}}))((function(e){var t,n,c=Object(la.e)({id:e.id}),a=c.attributes,r=c.listeners,o=c.setNodeRef,i=c.transform,s=c.transition,l={transform:ya.a.Transform.toString(i),transition:s};return Object(v.jsx)("div",Object(f.a)(Object(f.a)(Object(f.a)({ref:o,style:l},a),r),{},{children:(null===e||void 0===e?void 0:e.text)&&Object(v.jsx)(da,{index:e.index,setCardIndex:e.setCardIndex,setTitle:e.setTitle,setText:e.setText,setShowEditModal:e.setShowEditModal,setShowDeleteModal:e.setShowDeleteModal,text:(null===e||void 0===e||null===(t=e.text[Number(e.id)])||void 0===t?void 0:t.text)||"",title:(null===e||void 0===e||null===(n=e.text[Number(e.id)])||void 0===n?void 0:n.title)||""})}))})),wa=Object(u.b)((function(e){return{userData:e.app.userData,outlineData:e.app.outlineData,currentFileID:e.app.currentFileID,outlineItemsForUpdate:e.app.outlineItemsForUpdate,outlineItemsDisplay:e.app.outlineItemsDisplay}}))((function(e){var t,n=Object(h.useState)(!1),c=Object(O.a)(n,2),a=c[0],r=c[1],o=Object(h.useState)(!1),i=Object(O.a)(o,2),s=i[0],l=i[1],d=Object(h.useState)(!1),u=Object(O.a)(d,2),p=u[0],b=u[1],j=Object(h.useState)(""),x=Object(O.a)(j,2),m=x[0],y=x[1],D=Object(h.useState)(""),w=Object(O.a)(D,2),I=w[0],M=w[1],S=Object(h.useState)(null),k=Object(O.a)(S,2),z=k[0],E=k[1],L=Object(h.useState)([]),N=Object(O.a)(L,2),P=N[0],R=N[1];Object(h.useEffect)((function(){F()}),[e.match]);var F=function(){g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).get().then((function(t){if(void 0!==t.data()){var n=t.data(),c=n.data;e.dispatch((o=n,function(e){e({type:A,payload:o})})),c.length>0&&(e.dispatch($(Object(T.a)(c))),e.dispatch(q(Object(T.a)(c))));for(var a=[],r=0;r<c.length;r++)a.push(String(r));R(a)}var o}))},U=Object(sa.n)(Object(sa.m)(sa.d),Object(sa.m)(sa.c,{coordinateGetter:la.d}));return Object(v.jsxs)("div",{children:[Object(v.jsx)(uc.b,{to:"/writing-app/dashboard",children:Object(v.jsx)("div",{children:"Home"})}),null===e||void 0===e||null===(t=e.outlineData)||void 0===t?void 0:t.name,Object(v.jsx)("button",{onClick:function(){return b(!0)},children:"Create new card"}),Object(v.jsx)(sa.a,{sensors:U,collisionDetection:sa.e,onDragEnd:function(t){var n=t.active,c=t.over;if(n.id!==c.id){var a,r;R((function(e){return a=e.indexOf(n.id),r=e.indexOf(c.id),Object(la.b)(e,a,r)}));var o=Object(T.a)(e.outlineItemsForUpdate),i=o.splice(a,1);o.splice.apply(o,[r,0].concat(Object(T.a)(i)));var s=o.map((function(e,t){return Object(f.a)(Object(f.a)({},e),{},{index:t})}));e.dispatch(q(Object(T.a)(s))),function(t){var n=t.map((function(e,t){return Object(f.a)(Object(f.a)({},e),{},{index:t})}));g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).update({data:n}).then((function(){console.log("updated")})),C(e.userData.userID,String(e.outlineData.docID),e.match.params.fileID)}(s)}},children:Object(v.jsx)(la.a,{items:P,strategy:la.c,children:Object(v.jsx)(Ia,{children:P.map((function(t,n){return Object(v.jsx)(Da,{index:n,setCardIndex:E,setTitle:y,setText:M,setShowEditModal:r,setShowDeleteModal:l,id:t,text:e.outlineItemsDisplay},t)}))})})}),Object(v.jsx)(_c,{showEditModal:a,itemIndexes:P,match:e.match,cardIndex:z,setShowEditModal:r,title:m,text:I}),Object(v.jsx)(Jc,{showDeleteModal:s,setItemIndexes:R,itemIndexes:P,match:e.match,cardIndex:z,setShowDeleteModal:l}),Object(v.jsx)($c,{showCreateModal:p,itemIndexes:P,setItemIndexes:R,match:e.match,setShowCreateModal:b,getOutline:F})]})})),Ia=I.b.div(Ln||(Ln=Object(w.a)(["\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    grid-gap: 20px;\n    margin: 20px;\n    grid-template-rows: auto;\n"]))),Ma=n(5),Ta=n(52),Sa=function(e){return Object(v.jsx)(Ca,{children:Object(v.jsx)(ka,{position:e.position,children:e.items.map((function(t,n){return Object(v.jsx)(za,{isSelected:n===e.index,children:t},t)}))})})},Ca=I.b.div(Nn||(Nn=Object(w.a)(["\n    font-family: 'Courier New', Courier, monospace;\n"]))),ka=I.b.div(An||(An=Object(w.a)(["\n    position: absolute;\n    top: ",";\n    left: ",";\n    display: ",";\n    flex-direction: column;\n    font-family: 'Courier New', Courier, monospace;\n    background-color: white;\n    border-radius: 5px;\n"])),(function(e){return e.position.top}),(function(e){return e.position.left}),(function(e){return e.position.display})),za=I.b.span(Pn||(Pn=Object(w.a)(["\n    padding: 8px;\n    font-family: 'Courier New', Courier, monospace;\n    font-weight: 600;\n    color: black;\n    background-color: ",";\n    &:first-of-type {\n        border-radius: 5px 5px 0 0;\n    }\n    &:last-of-type {\n        border-radius: 0 0 5px 5px;\n    }\n"])),(function(e){return e.isSelected?"hsl(217, 49%, 94%)":"transparent"})),Ea=function(e){return Object(v.jsx)(_a,{children:Object(v.jsx)(Ga,Object(f.a)(Object(f.a)({},e.attributes),{},{children:e.children}))})},La=function(e){return Object(v.jsx)(_a,{children:Object(v.jsx)(Va,Object(f.a)(Object(f.a)({},e.attributes),{},{children:e.children}))})},Na=function(e){return Object(v.jsx)(Ua,Object(f.a)(Object(f.a)({},e.attributes),{},{children:e.children}))},Aa=function(e){return Object(v.jsx)(Ba,Object(f.a)(Object(f.a)({},e.attributes),{},{children:e.children}))},Pa=function(e){return Object(v.jsx)(Fa,Object(f.a)(Object(f.a)({},e.attributes),{},{children:e.children}))},Ra=function(e){return Object(v.jsx)(_a,{children:Object(v.jsx)(Za,Object(f.a)(Object(f.a)({},e.attributes),{},{children:e.children}))})},Fa=I.b.p(Rn||(Rn=Object(w.a)(["\n    font-weight: 500;\n    display: flex;\n    justify-content: flex-end;\n    /* color: red; */\n    font-family: 'Courier New', Courier, monospace;\n    text-transform: uppercase;\n    margin-left: 1px;\n    transform: translate(-1px);\n"]))),Ua=I.b.p(Fn||(Fn=Object(w.a)(["\n    font-weight: 600;\n    text-transform: uppercase;\n    font-family: 'Courier New', Courier, monospace;\n"]))),Ba=I.b.p(Un||(Un=Object(w.a)(["\n    /* color: blue; */\n    font-family: 'Courier New', Courier, monospace;\n    font-size: 1rem;\n    max-width: 60ch;\n"]))),_a=I.b.div(Bn||(Bn=Object(w.a)(["\n    display: flex;\n    justify-content: center;\n    margin-left: 1px;\n    transform: translate(-1px);\n"]))),Va=I.b.p(_n||(_n=Object(w.a)(["\n    /* text-align: center; */\n    font-family: 'Courier New', Courier, monospace;\n    /* color: orange; */\n"]))),Za=I.b.p(Vn||(Vn=Object(w.a)(["\n    font-family: 'Courier New', Courier, monospace;\n    width: 26ch;\n    /* color: brown; */\n"]))),Ga=I.b.div(Zn||(Zn=Object(w.a)(["\n    font-family: 'Courier New', Courier, monospace;\n    width: 34ch;\n"]))),Ha=I.b.div(Gn||(Gn=Object(w.a)(["\n    font-family: 'Courier New', Courier, monospace;\n    width: 60vw;\n    max-width: 600px;\n    margin: 0 auto;\n"]))),Xa=["DAWN","MORNING","DAY","AFTERNOON","DUSK","NIGHT","EVENING"],Wa=Object(u.b)((function(e){return{userData:e.app.userData}}))((function(e){var t,n,c,a,r=Object(h.useMemo)((function(){return Object(Ta.d)(Object(Ma.i)())}),[]),o=Object(h.useState)(),i=Object(O.a)(o,2),s=i[0],l=i[1],d=Object(h.useState)(0),u=Object(O.a)(d,2),p=u[0],b=u[1],j=Object(h.useState)({top:"-9999px",left:"-9999px",display:"none"}),x=Object(O.a)(j,2),m=x[0],g=x[1],y=Object(h.useState)(""),D=Object(O.a)(y,2),w=D[0],I=D[1],M=Object(h.useState)(""),T=Object(O.a)(M,2),S=T[0],C=T[1],k=null===(t={names:e.characters,times:Xa,locations:e.locations}[w])||void 0===t?void 0:t.filter((function(e){return e.startsWith(S.toUpperCase())&&e!==S.toUpperCase()}));Object(h.useEffect)((function(){if(r.selection){var t,n,c=r.selection.focus.path,a=null===(t=e.value[c[0]])||void 0===t||null===(n=t.children[0])||void 0===n?void 0:n.text;if(s&&w.length>0&&(null===k||void 0===k?void 0:k.length)>0&&(null===a||void 0===a?void 0:a.length)>0){var o=Ta.b.toDOMRange(r,s).getBoundingClientRect();g({top:"".concat(o.top+window.pageYOffset+25,"px"),left:"".concat(o.left+window.pageXOffset,"px"),display:"flex"})}else g({top:"-9999px",left:"-9999px",display:"none"})}}),[null===k||void 0===k?void 0:k.length,w,r.selection,S,s]);var z=Object(h.useCallback)((function(e){var t=e.element.type;return"character"===t?Object(v.jsx)(La,Object(f.a)({},e)):"dialog"===t?Object(v.jsx)(Ea,Object(f.a)({},e)):"heading"===t?Object(v.jsx)(Na,Object(f.a)({},e)):"transition"===t?Object(v.jsx)(Pa,Object(f.a)({},e)):"parenthetical"===t?Object(v.jsx)(Ra,Object(f.a)({},e)):Object(v.jsx)(Aa,Object(f.a)({},e))}),[]),E={checkTransition:function(e,t){return!("Semicolon"!==e.code||!e.shiftKey||t!==t.toUpperCase())&&(this.setNode("transition"),!0)},checkDescription:function(t,n,c){var a=e.value[t[0]-1].children[t[1]].text,r=e.value[t[0]-2].type,o=c.toUpperCase();return!(""!==a||"Enter"===n.key||o.includes("EXT.")||o.includes("INT.")||o.includes("INT./EXT.")||"dialog"===r)&&(this.setNode(null),!0)},checkDialog:function(t){var n=e.value[t[0]-1].children[t[1]].text,c=e.value[t[0]-1].type;return n===n.toUpperCase()&&n.length>0&&":"!==n[n.length-1]?(Ma.h.setNodes(r,{type:"character"},{at:[t[0]-1],match:function(e){return Ma.a.isBlock(r,e)},mode:"lowest"}),this.setNode("dialog"),!0):("("===n[0]||"character"===c)&&(this.setNode("dialog"),!0)},checkParenthetical:function(t,n,c){var a=e.value[t[0]-1].children[t[1]].text;return!(a!==a.toUpperCase()||!("("===n[0]||"("===c.key&&c.shiftKey))&&(this.setNode("parenthetical"),Ma.h.setNodes(r,{type:"character"},{at:[t[0]-1],match:function(e){return Ma.a.isBlock(r,e)},mode:"lowest"}),!0)},checkCharacter:function(t,n,c){if(t[0]>1&&("dialog"===e.value[t[0]-2].type&&c&&n===n.toUpperCase()&&!n.includes("INT.")&&!n.includes("EXT.")&&!n.includes("INT./EXT.")))return this.setNode("character"),!0;return!1},incrementIndex:function(e){return"ArrowUp"===e.key?(e.preventDefault(),b(0===p?k.length-1:p-1),!0):"ArrowDown"===e.key?(e.preventDefault(),b(p===k.length-1?0:p+1),!0):void 0},timeSearch:function(e){var t=e[r.selection.focus.path[0]].children[0].text;if(t.includes("-")){var n=t.split("-");n.length>1&&C(n[n.length-1].trim())}},insertNodes:function(e){var t={children:[{text:""}]};e&&(t.type=e),Ma.h.insertNodes(r,[t])},replaceLocation:function(t){var n=e.value[t[0]].children[t[1]].text,c=n.split(" ")[0].toUpperCase(),a=Ma.f.edges(r.selection),o=Object(O.a)(a,1)[0],i=0;"INT."!==c&&"EXT."!==c||(i=5),"INT./EXT."===c&&(i=10);var s={offset:i,path:t},l=Ma.a.range(r,s,o);this.insertText(k[p],l),n.includes("-")||this.insertText(" - "),b(0),C("")},handleDelete:function(t,n,c){var a=e.value[t[0]].children[t[1]].text,o=r.selection.focus.offset;if(!(a.length>0&&o>0)&&(""!==a||"heading"!==c&&c))return n.preventDefault(),this.setNode(null)},handleEnter:function(e,t,n){return"transition"===n?(r.insertBreak(),this.setNode(null)):(n||r.insertBreak(),"dialog"===n&&(t.preventDefault(),this.insertNodes(null),this.insertNodes("character")),"parenthetical"===n?(t.preventDefault(),this.insertNodes("dialog")):this.handleReplace(e,t,n))},setNode:function(e){return Ma.h.setNodes(r,{type:e},{match:function(e){return Ma.a.isBlock(r,e)}})},insertText:function(e,t){Ma.h.insertText(r,e,{at:t})},replaceCharacter:function(t){this.insertText(k[p],[t[0]]),e.addCharacter(k[p]),"character"===e.value[t[0]].type?this.insertNodes("dialog"):r.insertBreak()},replaceTime:function(t){var n=Ma.f.edges(r.selection),c=Object(O.a)(n,1)[0],a=Ma.a.before(r,c,{unit:"word"}),o=Ma.a.range(r,a,c);this.insertText(k[p],o),this.insertNodes(null);var i=e.value[t[0]].children[0].text;return e.addLocation(i),this.insertNodes(null)},handleReplace:function(t,n,c){if((null===k||void 0===k?void 0:k.length)>0&&"locations"===w&&S.length>0)return n.preventDefault(),E.replaceLocation(t);if((null===k||void 0===k?void 0:k.length)>0&&w.length>0&&S.length>0)return n.preventDefault(),C(""),b(0),"names"===w?E.replaceCharacter(t):E.replaceTime(t);if("Enter"===n.key&&"character"===c){n.preventDefault();var a=e.value[t[0]].children[0].text;return e.addCharacter(a),this.insertNodes("dialog")}if("Enter"===n.key&&"heading"===c){n.preventDefault(),this.insertNodes(null);var r=e.value[t[0]].children[0].text;return e.addLocation(r),this.insertNodes(null)}},checkHeading:function(e){var t=e[0].toUpperCase();return("INT."===t||"EXT."===t||"INT./EXT."===t)&&(this.setNode("heading"),!0)}},L=function(e){var t,n,c=r.selection.focus.path,a=null===(t=e[c[0]])||void 0===t||null===(n=t.children[c[1]])||void 0===n?void 0:n.text;if(!((null===a||void 0===a?void 0:a.length)>0||"character"===e[c[0]].type)||a!==a.toUpperCase()||(null===a||void 0===a?void 0:a.includes("INT."))||(null===a||void 0===a?void 0:a.includes("EXT."))||(null===a||void 0===a?void 0:a.includes("INT./EXT.")))if("heading"===e[c[0]].type){var o=r.selection.anchor.offset,i=null===a||void 0===a?void 0:a.split(" "),s=i.shift(),d=i.join(" "),u=s.length,h=1/0;if(d.includes("-")){var p=d.split("-");h=a.length-p.length-4}o>u&&o<h?function(e,t,n){I("locations"),C(t.split("-")[0].trim());var c=Ma.f.edges(r.selection),a=Object(O.a)(c,1)[0],o=0,i=e.toUpperCase();"INT."!==i&&"EXT."!==i||(o=4),"INT./EXT."===i&&(o=9);var s={offset:o,path:n},d=Ma.a.range(r,s,a);l(d)}(s,d,c):o>h&&function(e,t,n){I("times"),E.timeSearch(e);var c=t.split("-");c.pop();var a=c.join("").length+1,o=Ma.f.edges(r.selection),i=Object(O.a)(o,1)[0],s={path:n,offset:a},d=Ma.a.range(r,s,i);l(d)}(e,a,c)}else l(null),I("");else!function(e,t){I("names"),C(e[t[0]].children[0].text);var n=Ma.f.edges(r.selection),c=Object(O.a)(n,1)[0],a=Ma.a.before(r,c,{unit:"word"}),o=Ma.a.range(r,a,c);l(o)}(e,c)};return Object(v.jsx)(Ha,{children:Object(v.jsxs)(Ta.c,{value:e.value,editor:r,onChange:function(t){e.setValue(t),r.selection&&L(t)},children:[Object(v.jsx)(Ta.a,{style:{boxShadow:"none"},autoFocus:!0,placeholder:"Masterpiece goes here",onKeyDown:function(t){if(e.isPreventSave&&e.setIsPreventSave(!1),r.selection&&!(S.length>0&&w.length>0&&k.length>0&&E.incrementIndex(t))){var n=r.selection.focus.path,c=e.value[n[0]].type,a=e.value[n[0]].children[0].text,o=a.split(" ");if("Backspace"===t.key)return E.handleDelete(n,t,c);if("Enter"===t.key)return E.handleEnter(n,t,c);if("Tab"===t.key)return E.handleReplace(n,t,c);if(!E.checkTransition(t,a)&&!E.checkHeading(o)&&!(n[0]>1&&E.checkDescription(n,t,a))&&!E.checkCharacter(n,a,c)&&n[0]>0){if(E.checkParenthetical(n,a,t))return;if(E.checkDialog(n))return}}},renderElement:z}),(S.length>1&&"names"===w||S.length>0&&"names"===w&&"character"===(null===(n=e.value[null===r||void 0===r||null===(c=r.selection)||void 0===c||null===(a=c.focus)||void 0===a?void 0:a.path[0]])||void 0===n?void 0:n.type))&&Object(v.jsx)(Sa,{position:m,items:k,index:p}),S.length>0&&"locations"===w&&(null===k||void 0===k?void 0:k.length)>0&&Object(v.jsx)(Sa,{position:m,items:k,index:p}),S.length>0&&"times"===w&&k.length>0&&Object(v.jsx)(Sa,{position:m,items:k,index:p})]})})})),Ja=Object(u.b)((function(e){return{userData:e.app.userData}}))((function(e){var t=Object(h.useState)([{type:"paragraph",children:[{text:""}]}]),n=Object(O.a)(t,2),c=n[0],a=n[1],r=Object(h.useState)(!0),o=Object(O.a)(r,2),i=o[0],s=o[1],l=Object(h.useState)(0),d=Object(O.a)(l,2),u=d[0],p=d[1],b=Object(h.useState)("All changes saved"),j=Object(O.a)(b,2),m=j[0],y=j[1],D=Object(h.useState)([]),w=Object(O.a)(D,2),I=w[0],M=w[1],T=Object(h.useState)({}),S=Object(O.a)(T,2),C=S[0],k=S[1],z=Object(h.useState)([]),E=Object(O.a)(z,2),L=E[0],N=E[1],A=Object(h.useState)({}),P=Object(O.a)(A,2),R=P[0],F=P[1];Object(h.useEffect)((function(){if(!i){W("Saving...");var t=setTimeout((function(){return B(c,e.userData.userID,e.match.params.fileID)}),2e3);return function(){return clearTimeout(t)}}}),[c]),Object(h.useEffect)((function(){g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).get().then((function(e){var t=e.data().text;t.length>0&&(a(t),G(t),X(t),p(U(t)))}))}),[]);var U=function(){var e=0;return c.forEach((function(t){if(0!==t.children[0].text.length){var n=t.children[0].text.trim();n="heading"===t.type?n.split(" -").join("").split(" "):n.split(" "),e+=n.length}})),e},B=function(e,t,n){var a=U(c),r=a-u;if(p(a),_(e,t,n),r>0)return V(r)},_=function(e,t,n){g.collection("users").doc(t).collection("files").doc(n).update({text:e}).then((function(){W("All changes saved")}))},V=function(t){var n=x.a.firestore.FieldValue.increment(t);g.collection("users").doc(e.userData.userID).collection("statistics").doc("words-written").update({today:n})},Z=function(e){return e.sort((function(e,t){return t[1]-e[1]})),e.map((function(e){return e[0]}))},G=function(e){var t=function(e){var t={};return e.forEach((function(e){if("character"===(null===e||void 0===e?void 0:e.type)){var n=e.children[0].text.toUpperCase();H(n,t)}})),t}(e);k(t);var n=Object.entries(t),c=Z(n);M(c)},H=function(e,t){return t[e]?t[e]+=1:t[e]=1},X=function(e){var t={};e.forEach((function(e){if("heading"===(null===e||void 0===e?void 0:e.type)){var n=e.children[0].text.split(" ");if(n.length>1){n.shift();var c=n.join(" ").split("-");c.pop(),c.join("");var a=c[0].trim().toUpperCase();H(a,t)}}})),F(t);var n=Object.entries(t),c=Z(n);N(c)},W=function(e){y(e)};return Object(v.jsxs)(Ka,{children:[Object(v.jsx)("button",{onClick:U,children:"Words"}),m,Object(v.jsx)(Wa,{isPreventSave:i,setIsPreventSave:s,value:c,setValue:a,locations:L,addLocation:function(e){var t=e.split(" ");if(!(t.length<2)){t.shift();var n=t.join(" ").split("-");n.pop(),n.join("");var c=n[0].trim().toUpperCase(),a=H(c,Object(f.a)({},R));F(a);var r=Object.entries(a),o=Z(r);N(o)}},getLocations:X,characters:I,addCharacter:function(e){var t=e.toUpperCase(),n=H(t,Object(f.a)({},C));k(n);var c=Object.entries(I),a=Z(c);M(a)},match:e.match,getCharacters:G,updateSavingStatus:W})]})})),Ka=I.b.div(Hn||(Hn=Object(w.a)(["\n"]))),Qa=n(121),Ya=Object(u.b)((function(e){return{userData:e.app.userData,notesData:e.app.notesData,outlineData:e.app.outlineData}}))((function(e){var t,n=Object(h.useState)(""),c=Object(O.a)(n,2),a=c[0],r=c[1],o=Object(h.useState)(0),i=Object(O.a)(o,2),s=i[0],l=i[1],d=Object(h.useState)("All changes saved"),u=Object(O.a)(d,2),p=u[0],b=u[1];Object(h.useEffect)((function(){j()}),[e.match]),Object(h.useEffect)((function(){if(e.userData.userID){b("Saving...");var t=setTimeout((function(){return x()}),1e3);return function(){return clearTimeout(t)}}}),[a]);var j=function(){g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).get().then((function(t){var n;void 0!==t.data()&&(document.getElementById("notes-textarea").value=t.data().text),e.dispatch((n=t.data(),function(e){e({type:F,payload:n})}));var c=document.getElementById("notes-textarea");Qa.a.watch(c)}))};window.onbeforeunload=function(){if("Saving..."===p)return"saving"};var f=function(t,n,c){g.collection("users").doc(e.userData.userID).collection(n).doc(c).update({lastModified:t}).then((function(){console.log("updated")}))},x=function(){var t=Date.now();!function(t){g.collection("users").doc(e.userData.userID).collection("files").doc(e.match.params.fileID).update({text:t}).then((function(){console.log("work saved"),b("All changes saved")}))}(a),function(t){t-s>6e5&&(f(t,"files-folders",e.match.params.fileID),f(t,"files-folders",String(e.notesData.docID)))}(t),l(t)};return Object(v.jsx)(qa,{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(uc.b,{to:"/writing-app/dashboard",children:"Home"}),Object(v.jsx)($a,{children:null===e||void 0===e||null===(t=e.notesData)||void 0===t?void 0:t.name}),Object(v.jsx)("h4",{children:p}),Object(v.jsx)(er,{rows:"5",placeholder:"Write notes here",onChange:function(e){return r(e.target.value)},autoFocus:!0,id:"notes-textarea"})]})})})),qa=I.b.div(Xn||(Xn=Object(w.a)(["\n    display: flex; \n    flex-direction: column; \n    align-items: center; \n    justify-content: center;\n    padding: 20px 30vw;\n"]))),$a=I.b.h1(Wn||(Wn=Object(w.a)(["\n    font-size: 3rem;\n    font-weight: 600;\n    margin-bottom: 10px;\n"]))),er=I.b.textarea(Jn||(Jn=Object(w.a)(["\n    /* padding: 40px 0px; */\n    margin: 40px 0 0 0;\n    /* background-color: hsl(0, 10%, 5%); */\n    background-color: transparent;\n    border-radius: 15px;\n    font-size: 1rem;\n    line-height: 1.5;\n    width: 50vw;\n    color: var(--primary-text);\n    /* height: 80vh; */\n    border: none;\n    resize: none;\n    &:focus{\n        box-shadow: none;\n    }\n"]))),tr=Object(I.a)(Kn||(Kn=Object(w.a)(["\n\n    html {\n        --background: ",";\n        --sidebar: ",";\n        --primary-text: ",";\n        --highlight: ",";\n    }\n\n    html, body {\n        background-color: var(--background);\n    }\n\n    * {\n        &:focus {\n            box-shadow: 0 0 0 5px rgba(21, 156, 228, 0.4);\n            outline: none;\n        }\n    }\n\n    html, body, div, object, iframe,\n    h1, h2, h3, h4, h5, h6, p, blockquote,\n    a, img, ol, ul, li, form, label,\n    table, caption, tbody, tfoot, thead, tr, th, td,\n    article, aside, canvas, details, embed, \n    figure, figcaption, footer, header, hgroup, \n    menu, nav, output, section, summary,\n    time, mark, audio, video, button {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n        font-family: 'Montserrat', sans-serif;\n        font-weight: 500;\n    }  \n\n    button {\n        cursor: pointer;\n        background-color: transparent;\n    }\n\n    textarea {\n        font-family: 'Montserrat', sans-serif;\n        font-weight: 500;\n    }\n\n    h1, h2, h3, h4, h5, h6, p, a, div, label {\n        line-height: 1;\n        color: var(--primary-text);\n    }\n\n    button {\n        color: var(--primary-text);\n    }\n\n    ol, ul {\n        list-style: none;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n"])),(function(e){return e.colorThemes.background}),(function(e){return e.colorThemes.sidebar}),(function(e){return e.colorThemes.primaryText}),(function(e){return e.colorThemes.highlight})),nr=Object(u.b)((function(e){return{colorThemes:e.app.colorThemes}}))(tr),cr=Object(u.b)((function(e){return{userData:e.app.userData}}))((function(e){var t=Object(h.useState)(!0),n=Object(O.a)(t,2),c=n[0],a=n[1];return Object(h.useEffect)((function(){x.a.auth().onAuthStateChanged((function(t){if(t){var n={userID:t.uid};console.log("logged in"),e.dispatch((c=n,function(e){e({type:E,payload:c})})),g.collection("users").doc(t.uid).get().then((function(t){var n=t.data().preferences.colors;e.dispatch(X(n)),a(!1)}))}var c}))}),[]),c?null:e.userData.userID?Object(v.jsxs)("div",{children:[Object(v.jsx)(M.a,{path:"/writing-app/edit/outline/:fileID",render:function(e){return Object(v.jsx)(wa,Object(f.a)({},e))}}),Object(v.jsx)(M.a,{path:"/writing-app/edit/notes/:fileID",render:function(e){return Object(v.jsx)(Ya,Object(f.a)({},e))}}),Object(v.jsx)(M.a,{path:"/writing-app/edit/screenplay/:fileID",render:function(e){return Object(v.jsx)(Ja,Object(f.a)({},e))}}),Object(v.jsx)(M.a,{path:"/writing-app/dashboard/",render:function(e){return Object(v.jsx)(Fc,Object(f.a)({},e))}}),Object(v.jsx)(nr,{})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(y,{}),Object(v.jsx)(D,{})]})})),ar=n(122),rr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,249)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))},or={userData:{},currentProjectID:"",projectFiles:[],currentFileID:"",outlineData:{},notesData:{},dashboardCurrentSection:"projects",outlineItemsForUpdate:[],outlineItemsDisplay:[],rootDocs:[],layerOneDocs:[],layerTwoDocs:[],layerThreeDocs:[],currentLayer:null,colorThemes:{}},ir=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(f.a)(Object(f.a)({},e),{},{colorThemes:t.payload});case G:return Object(f.a)(Object(f.a)({},e),{},{currentLayer:t.payload});case Z:return Object(f.a)(Object(f.a)({},e),{},{layerThreeDocs:t.payload});case V:return Object(f.a)(Object(f.a)({},e),{},{layerTwoDocs:t.payload});case _:return Object(f.a)(Object(f.a)({},e),{},{layerOneDocs:t.payload});case B:return Object(f.a)(Object(f.a)({},e),{},{rootDocs:t.payload});case P:return Object(f.a)(Object(f.a)({},e),{},{outlineItemsDisplay:t.payload});case R:return Object(f.a)(Object(f.a)({},e),{},{outlineItemsForUpdate:t.payload});case U:return Object(f.a)(Object(f.a)({},e),{},{dashboardCurrentSection:t.payload});case F:return Object(f.a)(Object(f.a)({},e),{},{notesData:t.payload});case A:return Object(f.a)(Object(f.a)({},e),{},{outlineData:t.payload});case N:return Object(f.a)(Object(f.a)({},e),{},{currentFileID:t.payload});case L:return Object(f.a)(Object(f.a)({},e),{},{projectFiles:t.payload});case E:return Object(f.a)(Object(f.a)({},e),{},{userData:t.payload});case z:return Object(f.a)(Object(f.a)({},e),{},{currentProjectID:t.payload});default:return e}},sr={breadcrumbs:[{name:"all files",docId:null}],sortMethod:null},lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return Object(f.a)(Object(f.a)({},e),{},{sortMethod:t.payload});case It:return Object(f.a)(Object(f.a)({},e),{},{breadcrumbs:t.payload});default:return e}},dr=Object(d.c)({app:ir,dashboard:lr}),ur=Object(d.d)(dr,Object(d.a)(ar.a));j.a.render(Object(v.jsx)(p.a.StrictMode,{children:Object(v.jsx)(u.a,{store:ur,children:Object(v.jsx)(uc.a,{children:Object(v.jsx)(cr,{})})})}),document.getElementById("root")),rr()}},[[247,1,2]]]);
//# sourceMappingURL=main.b5a275f7.chunk.js.map